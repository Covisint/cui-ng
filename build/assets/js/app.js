!function(a){"use strict";a.module("cui-ng",[]),a.module("cui-ng").directive("cuiAvatar",[function(){return{restrict:"E",scope:{},link:function(b,c,d){b.user={},d.$observe("userAvatar",function(){if(""!==d.userAvatar){b.user.avatar=d.userAvatar;var e='url("'+b.user.avatar+'")';a.element(c).css("background-image",e)}else{b.user.color="#AAA";var e=b.user.color;a.element(c).css({"background-image":"none","background-color":e})}})}}}]),a.module("cui-ng").directive("cuiExpandable",[function(){return{restrict:"E",scope:!0,link:function(a,b,c){a.toggleExpand=function(){c.$set("expanded",!c.expanded)}}}}]),a.module("cui-ng").directive("cuiWizard",["$timeout","$compile","$window",function(b,c,d){return{restrict:"E",scope:!0,link:function(e,f,g){var h=function(){e.invalidForm=[],e.$steps=document.querySelectorAll("cui-wizard>step"),e.numberOfSteps=e.$steps.length,e.$indicatorContainer=document.querySelector("indicator-container"),e.$window=a.element(d),e.currentStep=Number(f[0].attributes.step.value),e.clickableIndicators=g.clickableIndicators,e.minimumPadding=g.minimumPadding,e.next=function(){e.currentStep++,j()},e.previous=function(a){a&&a.$invalid&&(e.invalidForm[currentStep]=!0),e.currentStep--,j()},e.goToStep=function(a){e.currentStep=a,j()},e.nextWithErrorChecking=function(b){b.$invalid?(a.forEach(b.$error,function(b){a.forEach(b,function(a){a.$setTouched()})}),e.invalidForm[e.currentStep]=!0):(e.invalidForm[e.currentStep]=!1,e.next())},isNaN(e.currentStep)?e.currentStep=1:e.currentStep>e.numberOfSteps?e.currentStep=e.numberOfSteps:e.currentStep<1&&(e.currentStep=1),i(),j(),p(),q(),r(),s()},i=function(){for(var b=[],d=0;d<e.numberOfSteps;d++)b[d]=e.$steps[d].attributes.title.value;b.forEach(function(d,f){var g;void 0!==e.clickableIndicators?(g=a.element('<span class="step-indicator" ng-click="goToStep('+(f+1)+')">'+b[f]+"</span>"),g[0].style.cursor="pointer"):g=a.element('<span class="step-indicator">'+b[f]+"</span>");var h=c(g)(e);a.element(e.$indicatorContainer).append(h)}),e.$indicators=document.querySelectorAll(".step-indicator")},j=function(){b(function(){for(var a=e.currentStep,b=0;b<e.$steps.length;b++)e.$steps[b].classList.remove("active"),e.$indicators[b].classList.remove("active");e.$steps[a-1].classList.add("active"),e.$indicators[a-1].classList.add("active")})},k=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},l=function(){for(var a=0,b=0;b<e.numberOfSteps;b++)a+=e.$indicators[b].scrollWidth;return a+(Number(e.minimumPadding)||0)*(e.numberOfSteps-1)},m=function(){return e.$indicatorContainer.clientWidth},n=function(){e.$indicatorContainer.classList.add("small")},o=function(){e.$indicatorContainer.classList.remove("small")},p=k(function(){var a=l(),b=m();a>b&&b<Math.max(e.indicatorsWidth||0,a)?(e.indicatorsWidth=a,n()):b>e.indicatorsWidth&&o()},40),q=function(){e.$window.bind("resize",function(){p()})},r=function(){e.$on("languageChange",function(){o(),p()})},s=function(){g.$observe("step",function(a){isNaN(a)?e.currentStep=1:a>e.numberOfSteps?e.currentStep=e.numberOfSteps:1>a?e.currentStep=1:e.currentStep=a})};h()}}}]),a.module("cui-ng").directive("passwordValidation",[function(){return{require:"ngModel",scope:!0,restrict:"A",link:function(a,b,c,d){d.$validators.length=function(a,b){return/^.{8,20}$/.test(b)?!0:!1},d.$validators.lowercase=function(a,b){return/.*[a-z].*/.test(b)?!0:!1},d.$validators.uppercase=function(a,b){return/.*[A-Z].*/.test(b)?!0:!1},d.$validators.number=function(a,b){return/.*[0-9].*/.test(b)?!0:!1},d.$validators.complex=function(a,b){return/[-!$%^&*()_+|~=`{}\[\]:";'<>?,.\/]/.test(b)?!0:!1}}}}]),a.module("cui.authorization",[]).factory("cui.authorization.routing",["cui.authorization.authorize","$timeout",function(a,b){var c=function(c,d,e,f,g,h,i){var j;void 0!==e.access?(j=a.authorize(e.access.loginRequired,e.access.requiredEntitlements,e.access.entitlementType,i),"login required"===j?b(function(){d.go("login",f).then(function(){c.$broadcast("$stateChangeSuccess",e,f,g,h)})}):"not authorized"===j?b(function(){d.go("notAuthorized",f).then(function(){c.$broadcast("$stateChangeSuccess",e,f,g,h)})}):"authorized"===j&&b(function(){d.go(e.name,f,{notify:!1}).then(function(){c.$broadcast("$stateChangeSuccess",e,f,g,h)})})):d.go(e.name,f,{notify:!1}).then(function(){c.$broadcast("$stateChangeSuccess",e,f,g,h)})};return c}]).factory("cui.authorization.authorize",[function(){var b=function(b,c,d,e){var f,g,h=[],i=!0,j="not authorized";if(d=d||"atLeastOne",b!==!0||void 0!==e&&void 0!==e.id)if(b!==!0||void 0===e||void 0!==c&&0!==c.length){if(c){for(a.forEach(e.entitlements,function(a){h.push(a.toLowerCase())}),g=0;g<c.length;g++)if(f=c[g].toLowerCase(),"all"===d){if(i=i&&h.indexOf(f)>-1,i===!1)break}else if("atLeastOne"===d&&(i=h.indexOf(f)>-1))break;j=i?"authorized":"not authorized"}}else j="authorized";else j="login required";return j};return{authorize:b}}]).directive("cuiAccess",["cui.authorization.authorize",function(b){return{restrict:"A",scope:!0,link:function(c,d,e){var f=JSON.parse(e.cuiAccess);c.loginRequired=!0,c.requiredEntitlements=f.requiredEntitlements||[],c.entitlementType=f.entitlementType||"atLeastOne";var d=a.element(d);e.$observe("user",function(){c.user=JSON.parse(e.user);var a=b.authorize(c.loginRequired,c.requiredEntitlements,c.entitlementType,c.user);"authorized"!==a?d.addClass("hide"):d.removeClass("hide")})}}}])}(angular),function(a){"use strict";a.module("app",["translate","ngMessages","cui.authorization","cui-ng","ui.router","snap","LocalStorageModule"]).run(["$rootScope","$state","cui.authorization.routing","user",function(a,b,c,d){d.setUser({id:"theMurrMan",name:"Bill Murray",avatar:"//www.fillmurray.com/200/200",entitlements:["admin"]}),a.$on("$stateChangeStart",function(e,f,g,h,i){e.preventDefault(),c(a,b,f,g,h,i,d.getUser())})}]).config(["$stateProvider","$urlRouterProvider","$locationProvider","$injector","localStorageServiceProvider",function(a,b,c,d,e){e.setPrefix("cui"),a.state("wizard",{url:"/wizard?step",templateUrl:"assets/angular-templates/cui-wizard.html"}).state("login",{url:"/login",templateUrl:"assets/angular-templates/login.html"}).state("notAuthorized",{url:"/notAuthorized",templateUrl:"assets/angular-templates/notAuthorized.html"}).state("admin",{url:"/admin",templateUrl:"assets/angular-templates/admin.html",access:{loginRequired:!0,requiredEntitlements:["admin"],entitlementType:"atLeastOne"}}).state("user",{url:"/user",templateUrl:"assets/angular-templates/user.html",access:{loginRequired:!0,requiredEntitlements:["admin","user"],entitlementType:"atLeastOne"}}).state("icons",{url:"/icons",templateUrl:"assets/angular-templates/icons.html",access:{loginRequired:!0}}),b.otherwise(function(a){var b=a.get("$state");b.go("wizard")})}]).factory("user",["$rootScope",function(a){return{getUser:function(){return a.appUser},setUser:function(b){a.appUser=b}}}]).factory("getSvgList",["$http",function(a){return a.get("bower_components/cui-icons/svgList")}]).controller("appCtrl",["$rootScope","$state","$stateParams","user","$timeout","localStorageService","$scope","getSvgList",function(a,b,c,d,e,f,g,h){var i=this;i.appUser={id:"theMurrMan",name:"Bill Murray",avatar:"//www.fillmurray.com/200/200",entitlements:["admin"]},i.setUser=function(a){e(function(){d.setUser(a),i.appUser=a,b.go("login",{notify:!0,reload:!0})})},i.goTo=function(a){b.go(a,{notify:!0,reload:!0})},i.desktopMenu=!0,i.toggleDestkopMenu=function(){i.desktopMenu=!i.desktopMenu},i.userPopup=!1,i.toggleUserPopup=function(){i.userPopup=!i.userPopup},g.$on("$locationChangeSuccess",function(){e(function(){i.step=c.step||1})}),e(function(){i.step=c.step||1});var j=f.get("app.organization");i.organization=j||{},g.$watch("app.organization",function(){f.set("app.organization",g.app.organization)},!0),i.organization.name="Thirdwave LLC",i.organization.divisions=["Web design","UI development","Wordpress development","Ruby development"],i.organization.cities=["Chicago","Aurora","Rockford","Joliet","Naperville","Springfiled"],i.organization.states=["IL","FL","NY","CA"],i.organization.countries=["U.S.A","Portugal","Spain"];var k=f.get("app.signOn");i.signOn=k||{},g.$watch("app.signOn",function(){f.set("app.signOn",g.app.signOn)},!0),i.signOn.password1="",i.signOn.password2="";var l=f.get("app.user");i.user=l||{},g.$watch("app.user",function(){f.set("app.user",g.app.user)},!0),i.user.timezones=["-08:00","-07:00","-06:00","-05:00","-04:00"],h.then(function(a){for(var b=a.data.split(","),c=0;c<b.length;c++){var d=b[c].indexOf(".svg");d>-1&&(b[c]=b[c].split(".")[0]),b[c]="bower_components/cui-icons/dist/svg/svg-out.svg#"+b[c]}i.svgList=b})}]).filter("svgIconCardHref",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}])}(angular);