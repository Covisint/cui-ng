"use strict";function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var _slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a){function b(a){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=function(a){d.$setValidity("match",a[0]===(a[1]||""))};a.$watch(function(){return[a.$eval(c.match),d.$viewValue]},e,!0)}}}a.module("cui-ng",[]),a.module("cui-ng").provider("$cuiI18n",[function(){var a,b;this.setLocalePreference=function(b){a=b},this.setLocaleCodesAndNames=function(a){b=a},this.getLocaleCodesAndNames=function(){return b},this.getInternationalizedName=function(b,c){var d;if(d=_.find(c,function(a){return a.lang===b}),void 0!=d)return d.text||d.value;if(!a)return void console.log("You need to configure you prefered language array with cuiI18n.setLocalePreference");for(var e=0;e<=a.length;e++)if(d=_.find(c,function(b){return b.lang===a[e]}),void 0!=d)return d.text||d.value},this.$get=function(){return this}}]),a.module("cui-ng").filter("cuiI18n",["LocaleService","$cuiI18n",function(a,b){return function(c){return b.getInternationalizedName(a.getLocaleCode(),c)}}]),a.module("cui-ng").directive("autoComplete",["$q","$parse","$http","$sce","$timeout","$templateCache","$interpolate",function(a,b,c,d,e,f,g){function h(b,f,g,h){function w(a,c){a&&("object"===("undefined"==typeof a?"undefined":_typeof(a))?(b.searchStr=C(a),z({originalObject:a})):"string"==typeof a&&a.length>0?b.searchStr=a:console&&console.error&&console.error("Tried to set "+(c?"initial":"")+" value of angucomplete to",a,"which is an invalid value"),F(!0))}function x(a){ma=null,b.hideResults(a),document.body.removeEventListener("click",x)}function y(a){return a.which?a.which:a.keyCode}function z(a){"function"==typeof b.selectedObject?b.selectedObject(a):b.selectedObject=a,F(a?!0:!1)}function A(a){return function(c){return b[a]?b[a](c):c}}function B(a){z({originalObject:a}),b.clearSelected&&(b.searchStr=null),U()}function C(a){return b.titleField.split(",").map(function(b){return D(a,b)}).join(" ")}function D(a,b){var c,d;if(b){c=b.split("."),d=a;for(var e=0;e<c.length;e++)d=d[c[e]]}else d=a;return d}function E(a,c){var e,f,g;return g=new RegExp(c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i"),a?(a.match&&a.replace||(a=a.toString()),f=a.match(g),e=f?a.replace(g,'<span class="'+b.matchClass+'">'+f[0]+"</span>"):a,d.trustAsHtml(e)):void 0}function F(a){b.notEmpty=a,ia=b.searchStr}function G(a){var c=y(a);if(c!==l&&c!==j)if(c===k||c===n)a.preventDefault();else if(c===i)a.preventDefault(),!b.showDropdown&&b.searchStr&&b.searchStr.length>=fa&&(V(),b.searching=!0,Y(b.searchStr));else if(c===m)U(),b.$apply(function(){ea.val(b.searchStr)});else{if(0===fa&&!b.searchStr)return;b.searchStr&&""!==b.searchStr?b.searchStr.length>=fa&&(V(),ga&&e.cancel(ga),b.searching=!0,ga=e(function(){Y(b.searchStr)},b.pause)):b.showDropdown=!1,ia&&ia!==b.searchStr&&!b.clearSelected&&b.$apply(function(){z()})}}function H(a){!b.overrideSuggestions||b.selectedObject&&b.selectedObject.originalObject===b.searchStr||(a&&a.preventDefault(),e.cancel(ga),R(),B(b.searchStr))}function I(a){var b=getComputedStyle(a);return a.offsetHeight+parseInt(b.marginTop,10)+parseInt(b.marginBottom,10)}function J(){return ka.getBoundingClientRect().top+parseInt(getComputedStyle(ka).maxHeight,10)}function K(){return f[0].querySelectorAll(".angucomplete-row")[b.currentIndex]}function L(){return K().getBoundingClientRect().top-(ka.getBoundingClientRect().top+parseInt(getComputedStyle(ka).paddingTop,10))}function M(a){ka.scrollTop=ka.scrollTop+a}function N(){var a=b.results[b.currentIndex];b.matchClass?ea.val(C(a.originalObject)):ea.val(a.title)}function O(a){var c=y(a),d=null,e=null;c===n&&b.results?(b.currentIndex>=0&&b.currentIndex<b.results.length?(a.preventDefault(),b.selectResult(b.results[b.currentIndex])):(H(a),U()),b.$apply()):c===i&&b.results?(a.preventDefault(),b.currentIndex+1<b.results.length&&b.showDropdown&&(b.$apply(function(){b.currentIndex++,N()}),la&&(d=K(),J()<d.getBoundingClientRect().bottom&&M(I(d))))):c===k&&b.results?(a.preventDefault(),b.currentIndex>=1?(b.$apply(function(){b.currentIndex--,N()}),la&&(e=L(),0>e&&M(e-1))):0===b.currentIndex&&b.$apply(function(){b.currentIndex=-1,ea.val(b.searchStr)})):c===o?b.results&&b.results.length>0&&b.showDropdown?-1===b.currentIndex&&b.overrideSuggestions?H():(-1===b.currentIndex&&(b.currentIndex=0),b.selectResult(b.results[b.currentIndex]),b.$digest()):b.searchStr&&b.searchStr.length>0&&H():c===m&&a.preventDefault()}function P(a){return function(c,d,e,f){d||e||f||!c.data||(c=c.data),b.searching=!1,Z(D(aa(c),b.remoteUrlDataField),a)}}function Q(a,c,d,e){0!==c&&-1!==c&&(c||d||e||(c=a.status),b.remoteUrlErrorCallback?b.remoteUrlErrorCallback(a,c,d,e):console&&console.error&&console.error("http error"))}function R(){ja&&ja.resolve()}function S(d){var e={},f=b.remoteUrl+encodeURIComponent(d);b.remoteUrlRequestFormatter&&(e={params:b.remoteUrlRequestFormatter(d)},f=b.remoteUrl),b.remoteUrlRequestWithCredentials&&(e.withCredentials=!0),R(),ja=a.defer(),e.timeout=ja.promise,c.get(f,e).success(P(d)).error(Q)}function T(c){R(),ja=a.defer(),b.remoteApiHandler(c,ja.promise).then(P(c))["catch"](Q)}function U(){b.showDropdown=!1,b.results=[],ka&&(ka.scrollTop=0)}function V(){b.showDropdown=ca,b.currentIndex=b.focusFirst?0:-1,b.results=[]}function W(a){var c,d,e,f,g=b.searchFields.split(","),h=[];for("undefined"!=typeof b.parseInput()&&(a=b.parseInput()(a)),c=0;c<b.localData.length;c++){for(d=!1,e=0;e<g.length;e++)f=D(b.localData[c],g[e])||"",d=d||f.toString().toLowerCase().indexOf(a.toString().toLowerCase())>=0;d&&(h[h.length]=b.localData[c])}b.searching=!1,Z(h,a)}function X(a,c,d){if(!d)return!1;for(var e in c)if(c[e].toLowerCase()===d.toLowerCase())return b.selectResult(a),!0;return!1}function Y(a){!a||a.length<fa||(b.localData?b.$apply(function(){W(a)}):b.remoteApiHandler?T(a):S(a))}function Z(a,c){var d,e,f,g,h,i;if(a&&a.length>0)for(b.results=[],d=0;d<a.length;d++)b.titleField&&""!==b.titleField&&(g=h=C(a[d])),e="",b.descriptionField&&(e=i=D(a[d],b.descriptionField)),f="",b.imageField&&(f=D(a[d],b.imageField)),b.matchClass&&(h=E(g,c),i=E(e,c)),b.results[b.results.length]={title:h,description:i,image:f,originalObject:a[d]};else b.results=[];b.autoMatch&&1===b.results.length&&X(b.results[0],{title:g,desc:e||""},b.searchStr)?b.showDropdown=!1:0!==b.results.length||da?b.showDropdown=!0:b.showDropdown=!1}function $(){b.localData?Z(b.localData,""):b.remoteApiHandler?T(""):S("")}var _,aa,ba,ca,da,ea=f.find("input"),fa=p,ga=null,ha=t,ia=null,ja=null,ka=f[0].querySelector(".angucomplete-dropdown"),la=!1,ma=null;f.on("mousedown",function(a){a.target.id?(ma=a.target.id,ma===b.id+"_dropdown"&&document.body.addEventListener("click",x)):ma=a.target.className}),b.currentIndex=b.focusFirst?0:null,b.searching=!1,ba=b.$watch("initialValue",function(a){a&&(ba(),w(a,!0))}),void 0!==g.fieldRequired&&b.$watch("fieldRequired",function(a,c){a&&a!=={}?a&&a!=={}&&h[b.inputName].$setValidity("required",!0):h[b.inputName].$setValidity("required",!1)}),b.$on("angucomplete-alt:changeInput",function(a,c,d){c&&c===b.id&&w(d)}),b.onFocusHandler=function(){b.focusIn&&b.focusIn(),0!==fa||b.searchStr&&0!==b.searchStr.length||(b.currentIndex=b.focusFirst?0:b.currentIndex,b.showDropdown=!0,$())},b.hideResults=function(){ma&&(ma===b.id+"_dropdown"||ma.indexOf("angucomplete")>=0)?ma=null:(_=e(function(){U(),b.$apply(function(){b.searchStr&&b.searchStr.length>0&&ea.val(b.searchStr)})},s),R(),b.focusOut&&b.focusOut(),b.overrideSuggestions&&b.searchStr&&b.searchStr.length>0&&-1===b.currentIndex&&H())},b.resetHideResults=function(){_&&e.cancel(_)},b.hoverRow=function(a){b.currentIndex=a},b.selectResult=function(a){b.matchClass&&(a.title=C(a.originalObject),a.description=D(a.originalObject,b.descriptionField)),b.clearSelected?b.searchStr=null:b.searchStr=a.title,z(a),U()},b.inputChangeHandler=function(a){return a.length<fa?(R(),U()):0===a.length&&0===fa&&(b.searching=!1,$()),b.inputChanged&&(a=b.inputChanged(a)),a},b.fieldRequiredClass&&""!==b.fieldRequiredClass&&(ha=b.fieldRequiredClass),b.minlength&&""!==b.minlength&&(fa=parseInt(b.minlength,10)),b.pause||(b.pause=r),b.clearSelected||(b.clearSelected=!1),b.overrideSuggestions||(b.overrideSuggestions=!1),b.fieldRequired&&h&&F(b.initialValue?!0:!1),b.inputType=g.type?g.type:"text",b.textSearching=g.textSearching?g.textSearching:u,b.textNoResults=g.textNoResults?g.textNoResults:v,ca="false"===b.textSearching?!1:!0,da="false"===b.textNoResults?!1:!0,b.maxlength=g.maxlength?g.maxlength:q,ea.on("keydown",O),ea.on("keyup",G),aa=A("remoteUrlResponseFormatter"),e(function(){var a=getComputedStyle(ka);la=a.maxHeight&&"auto"===a.overflowY})}var i=40,j=39,k=38,l=37,m=27,n=13,o=9,p=3,q=524288,r=500,s=200,t="autocomplete-required",u="Searching...",v="No results found",w="/angucomplete-alt/index.html";return f.put(w,'<div class="angucomplete-holder" ng-class="{\'angucomplete-dropdown-visible\': showDropdown}">  <input id="{{id}}_value" name="{{inputName}}" ng-class="{\'ng-valid\': notEmpty}" ng-model="searchStr" ng-disabled="disableInput" type="{{inputType}}" placeholder="{{placeholder}}" maxlength="{{maxlength}}" ng-focus="onFocusHandler()" class="{{inputClass}}" ng-focus="resetHideResults()" ng-blur="hideResults($event)" autocapitalize="off" autocorrect="off" autocomplete="off" ng-change="inputChangeHandler(searchStr)"/>  <div id="{{id}}_dropdown" class="angucomplete-dropdown" ng-show="showDropdown">    <div class="angucomplete-searching" ng-show="searching" ng-bind="textSearching"></div>    <div class="angucomplete-searching" ng-show="!searching && (!results || results.length == 0)" ng-bind="textNoResults"></div>    <div class="angucomplete-row" ng-repeat="result in results" ng-click="selectResult(result)" ng-mouseenter="hoverRow($index)" ng-class="{\'angucomplete-selected-row\': $index == currentIndex}">      <div ng-if="imageField" class="angucomplete-image-holder">        <img ng-if="result.image && result.image != \'\'" ng-src="{{result.image}}" class="angucomplete-image"/>        <div ng-if="!result.image && result.image != \'\'" class="angucomplete-image-default"></div>      </div>      <div class="angucomplete-title" ng-if="matchClass" ng-bind-html="result.title"></div>      <div class="angucomplete-title" ng-if="!matchClass">{{ result.title }}</div>      <div ng-if="matchClass && result.description && result.description != \'\'" class="angucomplete-description" ng-bind-html="result.description"></div>      <div ng-if="!matchClass && result.description && result.description != \'\'" class="angucomplete-description">{{result.description}}</div>    </div>  </div></div>'),{restrict:"EA",require:"^?form",scope:{selectedObject:"=",disableInput:"=",initialValue:"=",localData:"=",remoteUrlRequestFormatter:"=",remoteUrlRequestWithCredentials:"@",remoteUrlResponseFormatter:"=",remoteUrlErrorCallback:"=",remoteApiHandler:"=",id:"@",type:"@",placeholder:"@",remoteUrl:"@",remoteUrlDataField:"@",titleField:"@",descriptionField:"@",imageField:"@",inputClass:"@",pause:"@",searchFields:"@",minlength:"@",matchClass:"@",clearSelected:"@",overrideSuggestions:"@",fieldRequired:"=",fieldRequiredClass:"@",inputChanged:"=",autoMatch:"@",focusOut:"&",focusIn:"&",inputName:"@",focusFirst:"@",parseInput:"&"},templateUrl:function(a,b){return b.templateUrl||w},compile:function(a){var b=g.startSymbol(),c=g.endSymbol();if("{{"!==b||"}}"!==c){var d=a.html().replace(/\{\{/g,b).replace(/\}\}/g,c);a.html(d)}return h}}}]),a.module("cui-ng").directive("classToggle",[function(){return{restrict:"EAC",scope:!0,link:function(a,b,c){var d=c.toggledClass,e=function(){return b.attr("class")},f=function(b){b.indexOf(d)>-1?a.toggled=!0:a.toggled=!1};a.toggleClass=function(){b.toggleClass(d)},a.toggleOn=function(){a.toggled||a.toggleClass()},a.toggleOff=function(){a.toggled&&a.toggleClass()},a.$watch(e,f)}}}]),a.module("cui-ng").directive("cuiAvatar",["$timeout","$http","$filter",function(b,c,d){return{restrict:"A",scope:{cuiAvatar:"=",cuiAvatarNames:"=",cuiAvatarEmail:"="},link:function(b,e,f){var g,h={initScope:function(){g=this},selectors:{$elem:a.element(e[0])},config:{colorClassPrefix:f.cuiAvatarColorClassPrefix||!1,colorCount:f.cuiAvatarColorCount||0,cuiI18nFilter:a.isDefined(f.cuiAvatarCuii18nFilter)||!1,maxNumberOfInitials:f.cuiAvatarMaxNumInitials||2},watchers:function(){b.$watch("cuiAvatar",function(a){a&&g.update()}),b.$watch("cuiAvatarNames",function(a){a&&g.update()}),b.$watch("cuiAvatarEmail",function(a){a&&g.update()})},render:{nameBackground:function(){if(g.config.colorClassPrefix){if(0===g.config.colorCount)throw"For cui-avatar if you specify color class prefix you must specify the attribute cui-avatar-color-count";if(void 0!==_.find(g.selectors.$elem[0].classList,function(a){return a.indexOf(g.config.colorClassPrefix)>-1}))return;var a=Math.floor(Math.random()*g.config.colorCount+1);g.selectors.$elem[0].classList.add(g.config.colorClassPrefix+a),g.config.colorClassAdded=g.config.colorClassPrefix+a}},initials:function(){if(b.cuiAvatarNames){var c=function(){var a,c="";return g.config.cuiI18nFilter&&(a=d("cuiI18n")(b.cuiAvatarNames).split(" ")),(a||b.cuiAvatarNames).forEach(function(a,b){if(b<g.config.maxNumberOfInitials){if(!a)return;c+=a[0].toUpperCase()}}),c};g.selectors.$elem[0].innerHTML='<div class="cui-avatar__initials"></div>',g.selectors.$initials=a.element(e[0].querySelector(".cui-avatar__initials")),g.selectors.$initials[0].innerHTML=c()}},image:function(){function d(b){g.config.colorClassAdded&&g.selectors.$elem[0].classList.remove(g.config.colorClassAdded),g.selectors.$elem[0].innerHTML='<div class="cui-avatar__image-container"></div>',g.selectors.$image=a.element(e[0].querySelector(".cui-avatar__image-container")),g.selectors.$image[0].style.backgroundImage=String.prototype.concat('url("',b,'")')}var f=new Image;if(b.cuiAvatar&&""!==b.cuiAvatar)f.src=b.cuiAvatar,f.onload=d(f.src);else{if(!b.cuiAvatarEmail)return;var h=md5(b.cuiAvatarEmail);c.get("https://www.gravatar.com/avatar/"+h+"?d=404").then(function(a){f.src="https://www.gravatar.com/avatar/"+h,f.onload=d(f.src)})}}},update:function(){g.render.nameBackground(),g.render.initials(),g.render.image()}};h.initScope(),h.render.nameBackground(),h.render.initials(),h.render.image(),h.watchers()}}}]),a.module("cui-ng").directive("cuiDropdown",["$compile","$timeout","$filter",function(b,c,d){return{require:"ngModel",restrict:"E",scope:{ngModel:"=",options:"&",constraints:"&"},link:function(c,e,f,g){var h,i,j,k=c.$id,l={initScope:function(){h=this,(f.ngRequired||f.required)&&(g.$validators.required=function(){return null!==g.$viewValue}),a.forEach(h.watchers,function(a){a()}),a.forEach(h.scope,function(a,b){c[b]=a})},config:{inputClass:f["class"]||"cui-dropdown",dropdownWrapperClass:f.dropdownClass||"cui-dropdown__wrapper",dropdownItemClass:f.dropdownItemClass||"cui-dropdown__item",attachment:f.attachment||"top left",targetAttachment:f.targetAttachment||"top left",offset:f.offset||"0 0",defaultConstraints:[{to:"window",attachment:"together none"}],returnValue:f.returnValue||"option",displayValue:f.displayValue||"option",required:f.ngRequired||f.required||!1,defaultOption:a.isDefined(f.defaultOption),defaultOptionValue:f.defaultOption||'("select-one" | translate)'},selectors:{$cuiDropdown:a.element(e),$body:a.element(document.body)},watchers:{dropdownClick:function(){c.$on(k.toString(),h.helpers.reassignModel)},languageChange:function(){c.$on("languageChange",h.helpers.handleLanguageChange)},options:function(){c.$watch(c.options,function(a,b){a&&(h.helpers.setInitialInputValue(),h.render.currentValueBox())},function(b,c){return!a.equals(b,c)})}},scope:{renderDropdown:function(){h.selectors.$dropdown||h.render.dropdown()},destroyDropdown:function(){h.selectors.$dropdown&&(h.selectors.$dropdown.detach(),h.selectors.$dropdown=null)}},helpers:{getOptions:function(){return c.options()},getKeyValue:function(a,b){var c=a.split(".").slice(1);if(0===c.length)return b;var d,e=0;do d=d?d[c[e]]:b[c[e]],e++;while(e<c.length);return d},getOptionDisplayValues:function(){var a=[];if(h.config.defaultOption)if(h.config.defaultOptionValue.indexOf("(")>-1){var b=h.config.displayValue.replace(/( |\)|\))/g,"").split("|"),e=b[1],f=b[0];a.push(d(e)(f))}else a.push(h.config.defaultOptionValue);if(h.config.displayValue.indexOf("(")>-1)var b=h.config.displayValue.replace(/( |\)|\))/g,"").split("|"),e=b[1],f=b[0];else var f=h.config.displayValue;return c.options().forEach(function(b){e?a.push(d(e)(h.helpers.getKeyValue(f,b))):a.push(h.helpers.getKeyValue(f,b))}),a},getOptionReturnValues:function(){var a=[];return h.config.defaultOption&&a.push(null),c.options().forEach(function(b){a.push(h.helpers.getKeyValue(h.config.returnValue,b))}),a},getDropdownItem:function(a,d){var e=" ng-click=\"$root.$broadcast('"+k+"',"+a+')" ';return b(String.prototype.concat('<div class="',h.config.dropdownItemClass,'"',e,">",d,"</div>"))(c)},setInitialInputValue:function(){var b=h.helpers.getOptionDisplayValues(),d=h.helpers.getOptionReturnValues();if(!c.ngModel)return c.displayValue=b[0],c.ngModel=d[0],void(j=0);var e=_.findIndex(d,function(b){return a.equals(b,c.ngModel)});e>-1?(c.displayValue=b[e],j=e):(c.displayValue=b[0],c.ngModel=d[0],j=0)},reassignModel:function(a,b){"number"==typeof b?j=b:b=j;var d=h.helpers.getOptionDisplayValues(),e=h.helpers.getOptionReturnValues();c.displayValue=d[b],c.ngModel=e[b],h.scope.destroyDropdown()},handleLanguageChange:function(){h.helpers.reassignModel()}},render:{currentValueBox:function(){i&&i.$destroy(),i=c.$new();var a=b(String.prototype.concat('<div class="',h.config.inputClass,'" ng-click="renderDropdown()" off-click="destroyDropdown()">',"{{displayValue}}","</div>"))(i);h.selectors.$cuiDropdown.replaceWith(a),h.selectors.$cuiDropdown=a},dropdown:function m(){var m=b(String.prototype.concat('<div class="',h.config.dropdownWrapperClass,'">',"</div>"))(c),a=h.helpers.getOptionDisplayValues();a.forEach(function(a,b){m.append(h.helpers.getDropdownItem(b,a))}),m.width(.9*h.selectors.$cuiDropdown.outerWidth()),h.selectors.$dropdown=m,h.selectors.$body.append(m),new Tether({element:h.selectors.$dropdown[0],target:h.selectors.$cuiDropdown[0],attachment:h.config.attachment,targetAttachment:h.config.targetAttachment,constraints:c.constraints()||h.config.defaultConstraints})}}};l.initScope()}}}]),a.module("cui-ng").directive("cuiExpandable",[function(){return{restrict:"E",scope:!0,link:function(b,c,d){var e=a.element(c[0].querySelector("cui-expandable-body"));e.hide();var f=function(){c.toggleClass("expanded")},g=function(){e.animate({height:"toggle"},parseInt(c.attr("transition-speed")||300),"linear")};b.toggleExpand=function(){f()},b.expand=function(){b.expanded||f()},b.collapse=function(){b.expanded&&f()},b.$watch(function(){return c.attr("class")},function(a,c){c===a&&a.indexOf("expanded")>-1?(b.expanded=!0,g()):-1===a.indexOf("expanded")?(b.expanded===!0&&g(),b.expanded=!1):(b.expanded===!1&&g(),b.expanded=!0)})}}}]),a.module("cui-ng").provider("$cuiIcon",[function(){var a={};this.iconSet=function(b,c,d){a[b]={path:c,viewBox:d||void 0}},this.getIconSets=function(){return a},this.getIconSet=function(b){return a[b]?a[b]:void console.log("This collection of icons needs to be defined within your app`s config")},this.$get=function(){return this}}]),a.module("cui-ng").directive("cuiIcon",["$cuiIcon",function(b){return{restrict:"E",scope:{},link:function(c,d,e){var f,g,h,i,j=e.cuiSvgIcon;if(g=e.preserveaspectratio?' preserveAspectRatio="'+e.preserveaspectratio+'" ':"",h=e.svgClass?' class="'+e.svgClass+'" ':"",f=e.viewbox?' viewBox="'+e.viewbox+'" ':"",j&&j.indexOf(".svg")>-1)i=j;else if(j){var k=j.split(":")[1],l=j.split(":")[0];i=b.getIconSet(l).path+"#"+k,""===f&&b.getIconSet(l).viewBox&&(f=' viewBox="'+b.getIconSet(l).viewBox+'" ')}else console.log("You need to define a cui-svg-icon attribute for cui-icon");var m=$(String.prototype.concat('<svg xmlns="http://www.w3.org/2000/svg" ',g,h,f,">",'<use xlink:href="',i,'"></use>',"</svg>"));a.element(d).replaceWith(m)}}}]),a.module("cui-ng").factory("CuiPopoverHelpers",[function(){var a={getResetStyles:function(){return{"margin-right":"","margin-left":"","margin-bottom":"","margin-top":"",left:"",top:"",bottom:"",right:""}},getAttachmentFromPosition:function(a){switch(a){case"top":return"bottom center";case"bottom":return"top center";case"right":return"middle left";case"left":return"middle right"}},invertAttachmentPartial:function(a){switch(a){case"top":return"bottom";case"bottom":return"top";case"left":return"right";case"right":return"left"}},parsePositionArray:function(b){var c=[{position:"bottom"},{position:"top"},{position:"right"},{position:"left"}],d=[];return"undefined"==typeof b?d.push.apply(d,c):b.forEach(function(e,f){switch(e){case"any":d.push.apply(d,c);break;case"invert":d.push(Object.assign({},b[f-1],{position:a.invertAttachmentPartial(b[f-1].position)}));break;default:d.push(e)}}),d},parseOffset:function(b){var c=b.split(" "),d=a.getOffsetAndUnitsOfOffset(c[0]),e=a.getOffsetAndUnitsOfOffset(c[1]);return{verticalOffset:d,horizontalOffset:e}},parseAttachment:function(a){var b=a.split(" "),c=_slicedToArray(b,2),d=c[0],e=c[1];return{verticalAttachment:d,horizontalAttachment:e}},getTetherOffset:function(b,c){var d=a.parseOffset(c),e=d.verticalOffset,f=d.horizontalOffset;switch(b){case"top":case"bottom":return"0 "+-1*f.amount+f.units;default:return-1*e.amount+e.units+" 0"}},invertAttachment:function(b){var c=a.parseAttachment(b),d=c.verticalAttachment,e=c.horizontalAttachment;return invertAttachmentPartial(d)+" "+invertAttachmentPartial(e)},getOffsetAndUnitsOfOffset:function(a){var b=void 0,c=void 0;switch(a.indexOf("%")){case-1:b=window.parseInt(a.split("px")[0]),c="px";break;default:b=window.parseInt(a.split("%")[0]),c="%"}return{amount:b,units:c}},getPointerOffset:function(b){var c=b.position,d=b.offsetBetweenPointerAndContent,e=(b.popoverHeight,b.popoverWidth,b.pointerHeight),f=(b.pointerWidth,b.containerHeight),g=(b.containerWidth,b.distanceBetweenTargetAndPopover,a.getOffsetAndUnitsOfOffset(d)),h=function(){switch(c){case"top":case"bottom":return{"margin-left":"50%",left:-1*g.amount+g.units};case"left":case"right":switch(g.amount){case 0:return{top:"50%"};default:var a=void 0;return a="%"===g.units?f*(-1*g.amount/100):g.amount+g.units,{top:"50%","margin-top":a}}}},i=a.getContainerPaddings(b),j=function(){switch(c){case"top":return{bottom:"0",transform:"translate(-50%,"+(-Math.ceil(parseFloat(i["padding-bottom"]))+e)+"px)"};case"bottom":return{top:"0",transform:"translate(-50%,"+(Math.ceil(parseFloat(i["padding-top"]))-e)+"px)"};case"left":return{right:parseFloat(i["padding-right"])-e+"px",transform:"translate(0,-50%)"};case"right":return{left:parseFloat(i["padding-left"])-e+"px",transform:"translate(0,-50%)"}}};return Object.assign({},a.getResetStyles(),j(),h())},getPointerBorderStyles:function(a){var b=a.position,c=a.pointerHeight,d=a.pointerWidth,e=d+"px solid transparent",f=c+"px solid transparent";return"top"===b||"bottom"===b?{"border-right":e,"border-left":e,"border-bottom":f,"border-top":f}:{"border-right":f,"border-left":f,"border-bottom":e,"border-top":e}},getPointerStyles:function(b){var c=b.element,d=b.position,e=(b.offsetBetweenPointerAndContent,b.popoverHeight,b.popoverWidth,b.pointerHeight),f=(b.pointerWidth,b.containerHeight,b.containerWidth,b.distanceBetweenTargetAndPopover,c.css("backgroundColor")),g=e+"px solid "+f;return Object.assign({position:"absolute"},a.getPointerOffset(b),a.getPointerBorderStyles(b),_defineProperty({},"border-"+d,g))},getPointer:function(b){var c=$('<span class="cui-popover__pointer"></span>');return c.css(a.getPointerStyles(b)),c},getPopoverMargins:function(a,b){var c=b+"px";return{"margin-top":"bottom"===a?c:"","margin-right":"left"===a?c:"","margin-bottom":"top"===a?c:"","margin-left":"right"===a?c:""}},getContainerPaddings:function(b){var c=b.position,d=(b.offsetBetweenPointerAndContent,b.popoverHeight),e=b.popoverWidth,f=b.pointerHeight,g=b.distanceBetweenTargetAndPopover,h=a.getOffsetAndUnitsOfOffset(g),i="",j="",k="",l="";if("top"===c||"bottom"===c){var m=void 0;switch(h.units){default:m=h.amount+h.units;break;case"%":var n=d+f;m=n*(h.amount/100)+"px"}"top"===c?j=m:i=m}else{var o=void 0;switch(h.units){default:o=h.amount+h.units;break;case"%":var p=e+f;o=p*(h.amount/100)+"px"}"left"===c?k=o:l=o}return{"padding-top":i||"","padding-right":k||"","padding-bottom":j||"","padding-left":l||""}}};return a}]),a.module("cui-ng").directive("cuiPopover",["CuiPopoverHelpers","$compile","$timeout","$interval",function(b,c,d,e){return{restrict:"EA",scope:{},link:function(c,d,f){var g=void 0,h=[],i=void 0,j=void 0,k={},l=void 0,m=void 0,n=void 0,o={init:function(){d.css({opacity:"0","pointer-events":"none",position:"absolute"}),g=this,m=0,l=c.$eval(f.popoverPositions),l=b.parsePositionArray(l),g.config(l[m]),g.selectors[m]={},g.render.popoverContainer(m),a.forEach(g.watchers,function(a){a()})},config:function(a){var c=k;c.element=d,c.target=f.target,c.targetModifier=f.targetModifier||void 0,c.pointerHeight=f.pointerHeight&&window.parseInt(f.pointerHeight)||14,c.pointerWidth=f.pointerWidth&&window.parseInt(f.pointerWidth)||9,c.popoverWidth=d.outerWidth(),c.popoverHeight=d.outerHeight(),c.position=a.position;var e=(a&&a.popoverOffset||f.popoverOffset||"0 0").split(" "),g=a&&a.contentOffset||f.contentOffset||"0",h=void 0,i=void 0,j=void 0,l=void 0,m=void 0,n=void 0;if("top"===c.position||"bottom"===c.position){var o=_slicedToArray(e,2);j=o[0],l=o[1],h=["0",g].join(" "),i=["0",l].join(" "),m=c.popoverWidth,n=c.popoverHeight+c.pointerHeight}else{var p=_slicedToArray(e,2);l=p[0],j=p[1],h=[g,"0"].join(" "),i=[l,"0"].join(" "),m=c.popoverWidth+c.pointerHeight,n=c.popoverHeight}c.distanceBetweenTargetAndPopover=j,c.offsetBetweenPointerAndContent=g,c.offset=h,c.targetOffset=i,c.containerHeight=n,c.containerWidth=m,c.attachment=b.getAttachmentFromPosition(c.position),c.targetAttachment=b.getAttachmentFromPosition(b.invertAttachmentPartial(c.position))},helpers:{getTetherOptions:function(){var a=arguments.length<=0||void 0===arguments[0]?g.selectors.$container[0]:arguments[0],c=arguments[1],d=c.target,e=c.position,f=c.offset,h=c.targetOffset,i=c.targetModifier,j=c.attachment,k=c.targetAttachment;return{target:d,targetModifier:i,attachment:j,targetAttachment:k,targetOffset:h,offset:b.getTetherOffset(e,f),element:a,constraints:[{to:"window",attachment:"none none"}]}}},watchers:{position:function(){i=e(function(){h[m]&&h[m].element&&(1===l.length?g.newMode("normal"):h[m].element.classList.contains("tether-out-of-bounds")?g.newMode("try-another"):g.newMode("normal"))},100)},targetElementPosition:function(){j=e(function(){c.targetPosition=g.selectors.$target.offset()},10),c.$watch("targetPosition",function(a){a&&h[m].position()},function(a,b){return a.top!==b.top||a.left!==b.left})},scopeDestroy:function(){c.$on("$destroy",function(){e.cancel(i),e.cancel(j),h[m].destroy(),g.selectors[m].$container&&g.selectors[m].$container.detach(),g.selectors[m].$pointer&&g.selectors[m].$pointer.detach()})}},selectors:{$target:a.element(document.querySelector(f.target))},render:{popoverContainer:function(c){var e=b.getPointer,f=b.getPopoverMargins,i=b.getContainerPaddings,j=k,l=$('<div class="cui-popover__container"></div>'),m=e(j);l.css(i(j)),g.selectors[c].$container=l,g.selectors[c].$container[0].classList.add("hide--opacity"),l.append(m),g.selectors[c].$pointer=m;var n=d.clone();n.css({opacity:"","pointer-events":"",position:""}),n.css(f(j.position,j.pointerHeight)),g.selectors[c].$container.append(n),a.element(document.body).append(l),h[c]=new Tether(g.helpers.getTetherOptions(l,j)),h[c].position()}},newMode:function(a){b.getPointer,b.getPopoverMargins,b.getContainerPaddings;switch(a){case"normal":g.selectors[m].$container[0].classList.contains("hide--opacity")&&g.selectors[m].$container[0].classList.remove("hide--opacity");break;case"try-another":g.tryAnotherPosition()}},tryAnotherPosition:function(){if("undefined"==typeof n&&0===m?n=1:"undefined"==typeof n?n=0:n++,n!==m){if(n===l.length-1)return"hide"===l[n]&&(g.selectors[m].$container[0].classList.contains("hide--opacity")||g.selectors[m].$container[0].classList.add("hide--opacity")),void(n=void 0);"undefined"!=typeof g.selectors[n]&&delete g.selectors[n],g.selectors[n]={};var a=l[n];g.config(a),g.render.popoverContainer(n),h[n].element.classList.contains("tether-out-of-bounds")?(g.selectors[n].$container.detach(),h[n].destroy(),delete g.selectors[n]):(g.selectors[m].$container.detach(),h[m].destroy(),delete g.selectors[m],m=n,n=void 0,g.selectors[m].$container[0].classList.contains("hide--opacity")&&g.selectors[m].$container[0].classList.remove("hide--opacity"))}}};o.init()}}}]),a.module("cui-ng").directive("cuiWizardProto",["$timeout","$compile","$window","$rootScope","$document",function(b,c,d,e,f){return{restrict:"E",scope:!0,link:function(f,g,h){var i,j,k,l,m,n,o,p,q,r,s,t,u,v=function(){j=[],k=void 0!==h.mobileStack,l=a.element(g[0].querySelectorAll("step")),i=l.length,m=void 0!==h.bar&&1!==i,n=a.element(g[0].querySelector("indicator-container")),n.append('<div class="cui-steps"></div>'),u=a.element(n[0].querySelector(".cui-steps")),d=a.element(d),f.currentStep=Number(g[0].attributes.step.value),o=h.clickableIndicators,p=h.minimumPadding,q=a.element(document.querySelector("snap-content")),r=a.element("body"),f.wizardFinished=!1,f.next=function(a){a?f.goToState(a):(f.currentStep++,y(),z(),L()),f.wizardFinished||f.currentStep!==i||(f.wizardFinished=!0),J()},f.previous=function(a){a?f.goToState(a):(f.currentStep--,y(),z(),L()),J()},f.goToStep=function(a){a!==f.currentStep&&(f.currentStep=a,y(),z(),L(),J(),f.wizardFinished||f.currentStep!==i||(f.wizardFinished=!0))},f.goToState=function(a){"default"!==a&&e.$broadcast("stepChange",{state:a})},f.nextWithErrorChecking=function(b,c){b.$valid?(j[f.currentStep]=!1,J(),c?f.goToState(c):f.next()):(a.forEach(b.$error,function(b){a.forEach(b,function(a){a.$setTouched()})}),j[f.currentStep]=!0)},isNaN(f.currentStep)?f.currentStep=1:f.currentStep>i?f.currentStep=i:f.currentStep<1&&(f.currentStep=1),w(),x(),k&&A(),m&&z(),y(),G(),H(),I(),M()},w=function(){var b=[],d=[];f.defaultString="default",f.stepStates=[];for(var e=0;i>e;e++)b[e]=l[e].attributes.title.value,l[e].attributes.state&&(f.stepStates[e]=""+l[e].attributes.state.value),l[e].attributes.icon&&(d[e]=""+l[e].attributes.icon.value);f.icons=[],b.forEach(function(e,g){var h;void 0!==d[g]&&(d[g].indexOf(".")>-1?f.icons[g]='<div class="icon-container"><div class="icon"><img src="'+d[g]+'" class="cui-icon-rotate"/></div></div>':f.icons[g]='<div class="icon-container"><div class="icon"><cui-icon cui-svg-icon="'+d[g]+'" svg-class="cui-icon-rotate"></cui-icon></div></div>'),void 0!==o&&void 0!==f.icons[g]?(h=a.element('<span class="step-indicator" id="cui-wizard-ref-pointer-'+g+'" ng-click="goToStep('+(g+1)+");goToState('"+(f.stepStates[g]||f.defaultString)+"')\">"+b[g]+f.icons[g]+"</span>"),h[0].style.cursor="pointer"):void 0===o||f.icons[g]?h=a.element('<span class="step-indicator" id="cui-wizard-ref-pointer-'+g+'">'+b[g]+(f.icons[g]?f.icons[g]:"")+"</span>"):(h=a.element('<span class="step-indicator" id="cui-wizard-ref-pointer-'+g+'" ng-click="goToStep('+(g+1)+");goToState('"+(f.stepStates[g]||f.defaultString)+"')\">"+b[g]+"</span>"),
h[0].style.cursor="pointer");var i=c(h)(f);u.append(i)}),f.$indicators=a.element(g[0].querySelectorAll(".step-indicator"))},x=function(){m&&(a.element(n).append('<div class="steps-bar"></div>'),f.$bar=$(".steps-bar"),f.$bar[0].innerHTML='<div class="steps-bar-fill"></div>',f.$barFill=$(".steps-bar-fill"))},y=function(){b(function(){for(var a=0;a<l.length;a++)l[a].classList.remove("active"),f.$indicators[a].classList.remove("active"),k&&s[a].classList.remove("expanded"),a<f.currentStep-1?(f.$indicators[a].classList.add("visited"),k&&s[a].classList.add("visited")):(f.$indicators[a].classList.remove("visited"),k&&s[a].classList.remove("visited"));l[f.currentStep-1].classList.add("active"),f.$indicators[f.currentStep-1].classList.add("active"),k&&s[f.currentStep-1].classList.add("expanded")})},z=function(){m&&b(function(){f.$bar[0].style.left=f.$indicators[0].scrollWidth/2+"px",f.$bar[0].style.right=f.$indicators[f.$indicators.length-1].scrollWidth/2+"px",1==f.currentStep?f.$barFill[0].style.width="0px":f.$barFill[0].style.width=f.$indicators[f.currentStep-1].offsetLeft-f.$indicators[0].scrollWidth/2+f.$indicators[f.currentStep-1].scrollWidth/2+"px"})},A=function(){a.forEach(l,function(b,d){var e;b.innerHTML.indexOf("<!-- ngInclude:")>-1&&(e=b.innerHTML.split("<!-- ngInclude:")[1].split(" -->")[0]),b.classList.add("desktop-element");var h=c('<cui-expandable class="cui-expandable mobile-element"><cui-expandable-title class="cui-expandable__title"'+(void 0!==o?'ng-click="goToStep('+(d+1)+");goToState('"+(f.stepStates[d]||f.defaultString)+"')\">":">")+(f.icons[d]?f.icons[d]:"")+"<span>"+b.title+'</span></cui-expandable-title><cui-expandable-body class="cui-expandable__body">'+(e?'<div ng-include="'+e+'"></div>':b.innerHTML)+"</cui-expandable-body></cui-expandable>")(f);a.element(g[0]).append(h)}),s=a.element(g[0].querySelectorAll("cui-expandable.mobile-element"))},B=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},C=function(){for(var a=0,b=0;i>b;b++)a+=f.$indicators[b].scrollWidth;return a+(Number(p)||0)*(i-1)},D=function(){return n[0].clientWidth},E=function(){n[0].classList.add("small"),z()},F=function(){n[0].classList.remove("small"),z()},G=B(function(){z();var a=C(),b=D();a>b&&b<Math.max(f.indicatorsWidth||0,a)?(f.indicatorsWidth=a,E()):b>f.indicatorsWidth&&F()},40),H=function(){d.bind("resize",function(){G()})},I=function(){f.$on("languageChange",function(){F(),G()})},J=function(){var b;if(t=a.element(g[0].querySelector("cui-expandable.mobile-element>cui-expandable-title")),0!==t.length)var c=t[0].clientHeight;else var c=0;if(0!==q.length){var d=q.scrollTop();b=g[0].getBoundingClientRect().top,K(d+b+c*(f.currentStep-1))}else{var e=r.scrollTop();b=g[0].getBoundingClientRect().top,K(e+b+c*(f.currentStep-1))}},K=function(a){0!==q.length?q.animate({scrollTop:a},300,"linear"):r.animate({scrollTop:a},300,"linear")},L=function(){h.$set("step",f.currentStep)},M=function(){h.$observe("step",function(a){isNaN(a)?f.currentStep=1:a>i?f.currentStep=i:1>a?f.currentStep=1:f.currentStep=a,y()})};v()}}}]),a.module("cui-ng").directive("cuiWizard",["$timeout","$compile","$window","$rootScope",function(b,c,d,e){return{restrict:"E",scope:!0,link:function(f,g,h){var i,j={initScope:function(){i=this,Object.keys(i.scope).forEach(function(a){f[a]=i.scope[a]})},config:{mobileStack:void 0!==h.mobileStack,mobileStackBreakingPoint:parseInt(h.mobileStack),clickableIndicators:void 0!==h.clickableIndicators,minimumPadding:h.minimumPadding||0,bar:void 0!==h.bar},selectors:{$wizard:a.element(g[0]),$steps:a.element(g[0].querySelectorAll("step")),$bar:function(){return void 0!==h.bar&&i.selectors.$steps.length>0},$indicatorContainer:a.element(g[0].querySelectorAll("indicator-container")),$window:a.element(d),$body:a.element("body")},helpers:{isFormValid:function(a){return a.$valid?!0:(i.helpers.setErrorFieldsToTouched(a),!1)},setErrorFieldsToTouched:function(b){a.forEach(b.$error,function(b){a.forEach(b,function(a){a.$setTouched()})})},getStepInfo:function(a){var b=i.selectors.$steps[a];return{stepTitle:b.attributes["step-title"].value,icon:b.attributes.icon?b.attributes.icon.value:!1,state:b.attributes.state?b.attributes.state.value:!1}},getIconMarkup:function(a){return a?a.indexOf(".")>-1?String.prototype.concat('<div class="icon-container">','<div class="icon">','<img src="',a,'" class="cui-icon-rotate"/>',"</div>","</div>"):String.prototype.concat('<div class="icon-container">','<div class="icon">','<cui-icon cui-svg-icon="',a,'" svg-class="icon-svg"></cui-icon>',"</div>","</div>"):""},getNgClickForIndicator:function(a,b){return i.config.clickableIndicators?String.prototype.concat('ng-click="goToStep(',a+1,b?","+b:"",')" '):""},getIndicatorMarkup:function(a){var b,c=i.helpers.getStepInfo(a);return b=a+1===i.scope.currentStep?"active":a+1<i.scope.currentStep?"visited":"",String.prototype.concat('<span class="step-indicator ',b,'"',i.helpers.getNgClickForIndicator(a,c.state),">",'<span class="step-indicator__title">',c.stepTitle,"</span>",i.helpers.getIconMarkup(c.icon),"</span>")},getIndicatorsWidth:function(){var a=0;return i.selectors.$indicators.each(function(b,c){a+=$(this).width()}),a},thereIsRoomForIndicators:function(){return i.helpers.getIndicatorsWidth()+i.config.minimumPadding*(i.config.numberOfSteps-1)<i.selectors.$indicatorContainer.width()?!0:!1},debounce:function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},resizeHandler:function(){i.helpers.debounce(function(){i.config.bar&&i.reRender.bar(i.scope.currentStep),i.helpers.thereIsRoomForIndicators()&&i.config.stepsCollapsed?(i.config.stepsCollapsed=!1,i.selectors.$indicatorContainer.removeClass("small")):i.helpers.thereIsRoomForIndicators()||i.config.stepsCollapsed||(i.config.stepsCollapsed=!0,i.selectors.$indicatorContainer.addClass("small")),i.config.mobileStack&&i.selectors.$window.width()<=i.config.mobileStackBreakingPoint&&!i.config.mobileMode?(i.selectors.$expandables.forEach(function(a,b){a.attr("transition-speed",300),a.addClass("mobile-element")}),i.config.mobileMode=!0):i.config.mobileStack&&i.selectors.$window.width()>i.config.mobileStackBreakingPoint&&i.config.mobileMode&&(i.selectors.$expandables.forEach(function(a,b){a.attr("transition-speed",0),a.removeClass("mobile-element")}),i.config.mobileMode=!1)},200)()},scrollToStep:function(b){var c=a.element(i.selectors.$expandables[0].children()[0]),d=c.offset(),e=c[0].scrollHeight;i.selectors.$body.animate({scrollTop:d.top+e*(b-1)},300,"linear")}},scope:{currentStep:Number(g[0].attributes.step.value),wizardFinished:!1,next:function(a){a?i.scope.goToState(a):i.update(i.scope.currentStep+1)},nextWithErrorChecking:function(a,b){i.helpers.isFormValid(a)&&i.scope.next(b)},previous:function(a){a?i.scope.goToSate(a):i.update(i.scope.currentStep-1)},goToStep:function(a,b){a!==i.scope.currentStep&&(b&&i.scope.goToState(b),i.update(a))},goToState:function(a){e.$broadcast("stepChange",{state:a,element:g})}},watchers:{init:function(){this.windowResize(),this.languageChange()},windowResize:function(){i.selectors.$window.bind("resize",i.helpers.resizeHandler)},languageChange:function(){f.$on("languageChange",function(){i.helpers.thereIsRoomForIndicators()&&i.config.stepsCollapsed?(i.config.stepsCollapsed=!1,i.selectors.$indicatorContainer.removeClass("small")):i.helpers.thereIsRoomForIndicators()||i.config.stepsCollapsed||(i.config.stepsCollapsed=!0,i.selectors.$indicatorContainer.addClass("small")),i.config.bar&&i.reRender.bar(i.scope.currentStep)})}},render:{indicators:function(){i.selectors.$indicatorContainer.append('<div class="cui-steps"></div>'),i.selectors.$stepIndicatorContainer=a.element(i.selectors.$indicatorContainer[0].querySelector(".cui-steps")),i.selectors.$steps.each(function(b,d){var e=a.element(i.helpers.getIndicatorMarkup(b)),g=c(e)(f);i.selectors.$stepIndicatorContainer.append(g)}),i.selectors.$indicators=a.element(i.selectors.$stepIndicatorContainer[0].querySelectorAll(".step-indicator")),i.config.numberOfSteps=i.selectors.$indicators.length},bar:function(){b(function(){i.selectors.$indicatorContainer.append('<div class="steps-bar"><div class="steps-bar-fill"></div></div>'),i.selectors.$bar=a.element(i.selectors.$indicatorContainer[0].querySelector(".steps-bar")),i.selectors.$barFill=a.element(i.selectors.$indicatorContainer[0].querySelector(".steps-bar-fill")),i.selectors.$bar[0].style.left=i.selectors.$indicators[0].scrollWidth/2+"px",i.selectors.$bar[0].style.right=i.selectors.$indicators[i.config.numberOfSteps-1].scrollWidth/2+"px",1===i.scope.currentStep?i.selectors.$barFill[0].style.width="0px":i.selectors.$barFill[0].style.width=i.selectors.$indicators[i.scope.currentStep-1].offsetLeft-i.selectors.$indicators[0].scrollWidth/2+i.selectors.$indicators[i.scope.currentStep-1].scrollWidth/2+"px"})},steps:function(){i.config.mobileStack&&(i.selectors.$expandables=[],i.selectors.$steps.each(function(a,b){var d=(i.helpers.getStepInfo(a),"");i.scope.currentStep===a+1&&($(this).addClass("active"),d=" expanded");var e=$(c(String.prototype.concat('<cui-expandable class="cui-expandable cui-expandable--wizard',d,'" transition-speed="0">','<cui-expandable-title class="cui-expandable__title cui-expandable__title--wizard">',i.helpers.getIndicatorMarkup(a),"</cui-expandable-title>",'<cui-expandable-body class="cui-expandable__body cui-expandable__body--wizard"></cui-expandable-body>',"</cui-expandable>"))(f));e.insertBefore($(this)),$(this).detach().appendTo(e.children()[1]),i.selectors.$expandables.push($(this).parent().parent())}))}},reRender:{indicators:function(a,b){i.selectors.$indicators.each(function(b,c){a>b+1?$(this).addClass("visited"):$(this).removeClass("visited")}),i.selectors.$indicators[b-1].classList.remove("active"),i.selectors.$indicators[a-1].classList.add("active")},steps:function(a,b){i.selectors.$expandables.forEach(function(b,c){a>c+1?b.addClass("visited"):b.removeClass("visited")}),i.selectors.$steps[b-1].classList.remove("active"),i.selectors.$steps[a-1].classList.add("active"),i.selectors.$expandables[b-1].removeClass("expanded"),i.selectors.$expandables[a-1].addClass("expanded"),i.selectors.$expandables[b-1][0].querySelector(".step-indicator").classList.remove("active"),i.selectors.$expandables[a-1][0].querySelector(".step-indicator").classList.add("active")},indicatorContainer:function(){i.helpers.thereIsRoomForIndicators()&&i.config.stepsCollapsed?(i.config.stepsCollapsed=!1,i.selectors.$indicatorContainer.removeClass("small")):i.helpers.thereIsRoomForIndicators()||i.config.stepsCollapsed||(i.config.stepsCollapsed=!0,i.selectors.$indicatorContainer.addClass("small"))},bar:function(a){1===a?i.selectors.$barFill[0].style.width="0px":i.selectors.$barFill[0].style.width=i.selectors.$indicators[a-1].offsetLeft-i.selectors.$indicators[0].scrollWidth/2+i.selectors.$indicators[a-1].scrollWidth/2+"px"}},update:function(a,b){i.config.mobileMode&&i.helpers.scrollToStep(a),i.reRender.indicators(a,i.scope.currentStep),i.config.mobileStack&&i.reRender.steps(a,i.scope.currentStep),i.config.bar&&i.reRender.bar(a),f.currentStep=i.scope.currentStep=a,a===i.config.numberOfSteps&&(f.wizardFinished=i.scope.wizardFinished=!0),h.$set("step",a)}};j.initScope(),j.render.indicators(),i.config.bar&&j.render.bar(),j.render.steps(),j.watchers.init(),j.selectors.$window.resize()}}}]),a.module("cui-ng").directive("customError",["$q",function(b){return{restrict:"A",require:"ngModel",link:function(c,d,e,f){var g={},h=!1,i=0,j=function(a,b,c){var d=b.split(".");d.forEach(function(b,e){e<d.length-1?a=a[b]:a[b]=c})},k=function(){h=!0,i++,e.customErrorLoading&&j(c.$parent,e.customErrorLoading,!0)},l=function(){h=!1,e.customErrorLoading&&j(c.$parent,e.customErrorLoading,!1)};c.$watch(function(){return f.$modelValue},function(d,h){a.forEach(c.$eval(e.customError),function(a,c){var e=a(d);"boolean"==typeof e?f.$setValidity(c,e):(k(),g[c]?g[c].push(e.promise):g[c]=[e.promise],b.all(g[c]).then(function(a){f.$setValidity(c,e.valid(a[g[c].length-1])),l()},function(a){e["catch"]&&e["catch"](a),l()}))})},function(a,b){return a!==b})}}}]),a.module("cui-ng").directive("focusIf",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){function e(c){c&&a(function(){f.focus()},b.$eval(d.focusDelay)||0)}var f=c[0];d.focusIf?b.$watch(d.focusIf,e):e(!0)}}}]),a.module("cui-ng").directive("inlineEdit",["$compile","$timeout","$filter",function(b,c,d){return{restrict:"E",scope:{model:"=",type:"@",options:"=",display:"=",localData:"=",saveCallback:"&onSave",tempEditCallback:"&onEdit",hideSaveButton:"=hideSaveIf"},link:function(d,e,f){var g={init:function(){this.scope.init.bind(this)(),this.scope.watchers.bind(this)(),this.scope.functions.bind(this)(),this.render.bind(this)()},config:{valueClass:f.valueClass||"cui-field-val__val",inputClass:f.inputClass||"cui-field-val__val",labelClass:f.labelClass||"cui-field-val__field",wrapperClass:f.wrapperClass||"cui-field-val"},scope:{init:function(){d.edit=!1,d.focus=!1},functions:function(){d.toggleEdit=function(){d.focus=d.edit=!d.edit,d.tempEditCallback&&d.editChangeCallback(d.edit)},d.matchModels=function(){d.editInput=d.model},d.saveInput=function(){d.model=d.editInput,d.saveCallback()&&c(function(){d.saveCallback()()}),this.helpers.getDisplayValue()}.bind(this),d.parseKeyCode=function(a){13===a.keyCode&&(d.toggleEdit(),d.saveInput()),27===a.keyCode&&d.toggleEdit()},d.editChangeCallback=function(a){return a===!1?void d.tempEditCallback()(void 0):void(d.tempEditCallback()&&d.tempEditCallback()(d.editInput))}},watchers:function(){d.$watch("display",this.helpers.getDisplayValue),d.$watch("model",this.helpers.getDisplayValue)}},helpers:{getLabel:function(){var a="";return void 0!==f.label?a.concat('{{"',f.label,'"| translate}}'):void 0!==f.name?f.name:void console.log("Inline-edit needs 1 of the following attributes: label or name.")},getInput:function(){return f.type=f.type||"text","dropdown"===f.type?String.prototype.concat('<select ng-model="$parent.editInput" class="',this.config.inputClass,'"','ng-init="matchModels()" ng-options="',f.optionsExpression,'" ng-if="edit" ng-change="editChangeCallback()"></select>'):"auto-complete"===f.type?String.prototype.concat('<div auto-complete selected-object="$parent.editInput" local-data="localData"',' search-fields="',f.searchFields,'" title-field="',f.titleField,'" input-class="',this.config.inputClass,'" ',' match-class="highlight" ng-init="matchModels()" auto-match="true"',' ng-if="edit" ng-keypress="parseKeyCode($event)" initial-value="$parent.editInput.title" input-changed="editChangeCallback()"></div>'):String.prototype.concat('<input type="',f.type,'" ng-model="$parent.editInput" class="',this.config.inputClass,'" ','ng-init="matchModels()" ng-if="edit" ng-keyup="parseKeyCode($event)" focus-if="focus" ng-change="editChangeCallback()"/>')},getDisplayValue:function(){"password"===f.type?d.displayValue=Array(d.model?d.model.length+1:0).join("•"):d.displayValue=d.display||d.model}},render:function(){var c=b(String.prototype.concat('<div class="',this.config.wrapperClass,'">','<span class="',this.config.labelClass,'">',this.helpers.getLabel.call(this),":</span>",'<span ng-if="!edit" class="',this.config.valueClass,'">',"{{displayValue}}","</span>",this.helpers.getInput.call(this),"</div>",'<span class="cui-link" ng-click="toggleEdit()" ng-if="!edit">{{"cui-edit" | translate}}</span>','<span class="cui-link" ng-if="edit && !hideSaveButton" ng-click="saveInput();toggleEdit();">{{"cui-update" | translate}}</span>','<span class="cui-link" ng-if="edit" ng-click="toggleEdit()">{{"cui-cancel" | translate}}</span>'))(d);a.element(e[0]).html(c)}};g.init()}}}]),a.module("cui-ng").directive("match",["$parse",b]),a.module("cui-ng").directive("offClick",["$rootScope","$parse",function(b,c){function d(a,b){if(!a||!b)return!1;for(var c=b.length,d=0;c>d;++d){var e=b[d],f=!1;try{f=e.contains(a)}catch(g){"undefined"!=typeof e.compareDocumentPosition&&(f=e===a||Boolean(16&e.compareDocumentPosition(a)))}if(f)return!0}return!1}function e(c){if("touchmove"===c.type)return h=!0,!1;if(h)return h=!1,!1;var e=c.target||c.srcElement;a.forEach(g,function(a,f){a.elm.contains(e)||d(e,a.offClickFilter)||b.$evalAsync(function(){a.cb(a.scope,{$event:c})})})}var f=0,g={},h=!1;return document.addEventListener("touchmove",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),{restrict:"A",compile:function(a,d){var e=c(d.offClick);return function(a,h){function i(){g[m]={elm:h[0],cb:e,scope:a,offClickFilter:k}}function j(){g[m]=null,delete g[m]}var k,l,m=f++;k=document.querySelectorAll(a.$eval(d.offClickFilter)),d.offClickIf?l=b.$watch(function(){return c(d.offClickIf)(a)},function(a){a?i():a||j()}):i(),d.$observe("offClickFilter",function(b){k=document.querySelectorAll(a.$eval(b))}),a.$on("$destroy",function(){j(),l&&l(),h=null})}}}}]),a.module("cui-ng").directive("onEnter",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){c.bind("keydown keypress",function(c){13===c.which&&!function(){c.preventDefault();var e=b.$eval(d.onEnter);a(b.$eval(d.ngModel)?function(){e(b.$eval(d.ngModel))}:function(){e()})}()}),b.$on("destroy",function(){c.unbind()})}}}]),a.module("cui-ng").directive("paginate",["$compile","$timeout","$interval",function(b,c,d){return{restrict:"AE",scope:{resultsPerPage:"&",count:"&",onPageChange:"&",page:"=ngModel"},link:function(e,f,g){var h,i,j={initScope:function(){h=this,h.config.numberOfPages=h.helpers.getNumberOfPages(),h.config.howManyPagesWeCanShow=h.helpers.howManyPagesWeCanShow(),e.paginate={currentPage:e.page?h.helpers.normalizePage(e.page):1},e.onPageChange()&&e.onPageChange()(e.paginate.currentPage),a.forEach(h.scope,function(a,b){e.paginate[b]=a})},selectors:{$paginate:a.element(f[0])},config:{pageClass:g.pageClass||"cui-paginate__page",activePageClass:g.activePageClass||"cui-paginate__page--active",ellipsesClass:g.ellipsesClass||"cui-paginate__ellipses",previousClass:g.previousNextClass||"cui-paginate__previous",nextClass:g.previousNextClass||"cui-paginate__next",pageContainerClass:g.pageContainerClass||"cui-paginate__page-container",ellipsesButton:g.ellipses||"...",previousButton:g.previousButton||"<",nextButton:g.nextButton||">"},watchers:{resultsPerPage:function(){e.$watch(e.resultsPerPage,function(a,b){a&&a!==b&&h.helpers.updateConfigAndRerender()})},count:function(){e.$watch(e.count,function(a,b){a&&a!==b&&h.helpers.updateConfigAndRerender()})},page:function(){e.$watch("page",function(a){a&&a!==e.paginate.currentPage&&(a>h.config.numberOfPages?e.paginate.currentPage=h.config.numberOfPages:1>a?e.paginate.currentPage=1:e.paginate.currentPage=a,h.helpers.handleStepChange())})},paginateResize:function(){i=d(h.helpers.resizeHandler,20)},scopeDestroy:function(){e.$on("$destroy",function(){d.cancel(i)})}},helpers:{updateConfigAndRerender:function(){h.config.numberOfPages=h.helpers.getNumberOfPages(),h.config.howManyPagesWeCanShow=h.helpers.howManyPagesWeCanShow(),h.selectors.$pageContainer.replaceWith(h.render.pageContainer())},getNumberOfPages:function(){return Math.ceil(e.count()/e.resultsPerPage())},getWidthOfAPage:function(){return h.helpers.getWidthOfElement($(h.render.pageNumber(1)))},getAvailableSpaceForPages:function(){var a=h.config.width||h.selectors.$paginate.width(),b=h.helpers.getWidthOfElement(h.render.previousButton()),c=h.helpers.getWidthOfElement(h.render.nextButton());return a-(b+c)-1},getWidthOfElement:function(a){a.appendTo(document.body);var b=a.outerWidth(!0);return a.remove(),b},howManyPagesWeCanShow:function(){return Math.floor(h.helpers.getAvailableSpaceForPages()/h.helpers.getWidthOfAPage())},handleStepChange:function(){e.page=e.paginate.currentPage,e.onPageChange()&&e.onPageChange()(e.paginate.currentPage),h.selectors.$pageContainer.replaceWith(h.render.pageContainer())},resizeHandler:function(){h.config.width?h.selectors.$paginate.width()!==h.config.width&&(h.config.width=h.selectors.$paginate.width(),h.config.widthOfAPage=h.helpers.getWidthOfAPage(),h.config.availableSpaceForPages=h.helpers.getAvailableSpaceForPages(),h.helpers.updateConfigAndRerender()):h.config.width=h.selectors.$paginate.width()},whatEllipsesToShow:function(){return h.config.numberOfPages<=h.config.howManyPagesWeCanShow?"none":e.paginate.currentPage<h.config.howManyPagesWeCanShow/2+1?"right":e.paginate.currentPage<h.config.numberOfPages-h.config.howManyPagesWeCanShow/2?"both":"left"},normalizePage:function(a){var a=parseInt(a);return a<=h.config.numberOfPages&&a>=1?a:1>a?1:h.config.numberOfPages}},scope:{previous:function(){e.paginate.currentPage>1&&(e.paginate.currentPage--,h.helpers.handleStepChange())},next:function(){e.paginate.currentPage+1<=h.config.numberOfPages&&(e.paginate.currentPage++,h.helpers.handleStepChange())},goToPage:function(a){a!==e.paginate.currentPage&&(e.paginate.currentPage=h.helpers.normalizePage(a),h.helpers.handleStepChange())}},render:{init:function(){h.selectors.$paginate.append(h.render.previousButton()),h.selectors.$paginate.append(h.render.pageContainer()),h.selectors.$paginate.append(h.render.nextButton())},previousButton:function k(){var k=b(String.prototype.concat('<span ng-click="paginate.previous()" class="',h.config.previousClass,'">',h.config.previousButton,"</span>"))(e);return k},nextButton:function l(){var l=b(String.prototype.concat('<span ng-click="paginate.next()" class="',h.config.nextClass,'">',h.config.nextButton,"</span>"))(e);return l},ellipses:function m(a){var c=' ng-click="paginate.goToPage('+a+')" ',m=b(String.prototype.concat("<span",c,'class="',h.config.ellipsesClass,'">',h.config.ellipsesButton,"</span>"))(e);return m},pageNumber:function(a,c){var d,f;f=' ng-click="paginate.goToPage('+a+')" ',d=c?" "+h.config.activePageClass:"";var g=String.prototype.concat("<span",f,'class="',h.config.pageClass,d,'">',a,"</span>");return b(g)(e)},pagesXToY:function(a,b){var c=[];do{var d=h.render.pageNumber(a,a===e.paginate.currentPage);c.push(d),a++}while(b>=a);return c},pageNumbers:function(){var a=[],b=h.helpers.whatEllipsesToShow();if("none"===b)a.push(h.render.pagesXToY(1,h.config.numberOfPages));else if("right"===b){var c=h.config.howManyPagesWeCanShow-1;a.push(h.render.pagesXToY(1,c-1)),a.push(h.render.ellipses(c)),a.push(h.render.pageNumber(h.config.numberOfPages))}else if("both"===b){var d=e.paginate.currentPage-(Math.ceil(h.config.howManyPagesWeCanShow/2)-2),f=e.paginate.currentPage+(Math.floor(h.config.howManyPagesWeCanShow/2)-1);a.push(h.render.pageNumber(1)),a.push(h.render.ellipses(d)),a.push(h.render.pagesXToY(d+1,f-1)),a.push(h.render.ellipses(f)),a.push(h.render.pageNumber(h.config.numberOfPages))}else{var c=h.config.numberOfPages-(h.config.howManyPagesWeCanShow-2);a.push(h.render.pageNumber(1)),a.push(h.render.ellipses(c)),a.push(h.render.pagesXToY(c+1,h.config.numberOfPages))}return a},pageContainer:function n(){var n=$('<span class="'+h.config.pageContainerClass+'"></span>');return h.selectors.$pageContainer=n,h.render.pageNumbers().forEach(function(a){n.append(a)}),n}}};c(function(){j.initScope(),j.render.init(),a.forEach(j.watchers,function(a){a()})})}}}]),a.module("cui-ng").factory("CuiPasswordInfo",[function(){var a={},b={};return{info:b,policies:a}}]).factory("CuiPasswordValidators",["CuiPasswordInfo",function(a){RegExp.escape=function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};var b=function(b,d){return a.info[d]={},{lowercase:function(a,e){return a?c(b,d).complex(a,e)?!0:/.*[a-z].*/.test(e):!1},uppercase:function(a,e){return a?c(b,d).complex(a,e)?!0:/.*[A-Z].*/.test(e):!1},number:function(a,e){return a?c(b,d).complex(a,e)?!0:/.*[0-9].*/.test(e):!1},special:function(a,e){return a?c(b,d).complex(a,e)?!0:!/^[a-z0-9]+$/i.test(e):!1},complex:function(a,c){if(!a)return!1;var d=0;return b.allowLowerChars&&/.*[a-z].*/.test(c)&&d++,b.allowUpperChars&&/.*[A-Z].*/.test(c)&&d++,b.allowSpecialChars&&(/^[a-z0-9]+$/i.test(c)||d++),b.allowNumChars&&/.*[0-9].*/.test(c)&&d++,d>=b.requiredNumberOfCharClasses},lowercaseNotAllowed:function(a,b){return b?!/.*[a-z].*/.test(b):!0},uppercaseNotAllowed:function(a,b){return b?!/.*[A-Z].*/.test(b):!0},numberNotAllowed:function(a,b){return b?!/.*[0-9].*/.test(b):!0},specialNotAllowed:function(a,b){return b?/^[a-z0-9]+$/i.test(b):!0},disallowedChars:function e(c,f){if(!f)return!0;var g=!0,e=[];return b.disallowedChars.split("").forEach(function(a){f.indexOf(a)>-1&&(g=!1,e.push(a))}),a.info[d].disallowedChars=e.join(", "),g},disallowedWords:function f(c,e){if(!e)return!0;var g=!0,f=[];return b.disallowedWords.forEach(function(a){e.toUpperCase().indexOf(a.toUpperCase())>-1&&(g=!1,f.push(a))}),a.info[d].disallowedWords=f.join(", "),g},length:function(a,c){return a?c.length<=b.max&&c.length>=b.min:!1}}},c=function(c,d){var e={},f=Object.assign({},b(c,d)),g=function(){return!0};return a.policies[d]=c,e.complex=f.complex,c.allowLowerChars?(e.lowercase=f.lowercase,e.lowercaseNotAllowed=g):(e.lowercase=g,e.lowercaseNotAllowed=f.lowercaseNotAllowed),c.allowUpperChars?(e.uppercase=f.uppercase,e.uppercaseNotAllowed=g):(e.uppercase=g,e.uppercaseNotAllowed=f.uppercaseNotAllowed),c.allowNumChars?(e.number=f.number,e.numberNotAllowed=g):(e.number=g,e.numberNotAllowed=f.numberNotAllowed),c.allowSpecialChars?(e.special=f.special,e.specialNotAllowed=g):(e.special=g,e.specialNotAllowed=f.specialNotAllowed),c.disallowedChars&&(e.disallowedChars=f.disallowedChars),c.disallowedWords&&(e.disallowedWords=f.disallowedWords),(c.min||c.max)&&(e.length=f.length),e};return{getValidators:c}}]).factory("CuiPasswordPolicies",["CuiPasswordValidators","CuiPasswordInfo",function(a,b){var c={parse:function(a){var b={};return a.length?a.forEach(function(a){Object.keys(a).forEach(function(c){b[c]=a[c]})}):b=Object.assign({},a),b}};return c}]).directive("passwordValidation",["CuiPasswordPolicies","CuiPasswordValidators",function(b,c){return{require:"ngModel",scope:{passwordValidation:"="},restrict:"A",link:function(d,e,f,g){var h=d.$id;g.passwordValidationKey=h,d.$watch("passwordValidation",function(d){if(d){var e=b.parse(d),f=c.getValidators(e,h);a.forEach(f,function(a,b){g.$validators[b]=a}),g.$validate()}})}}}]).directive("passwordPopover",["CuiPasswordInfo",function(a){return{restrict:"A",link:function(b,c,d){var e=b.$eval(d.ngMessages.replace(".$error",".passwordValidationKey"));b.$watchCollection(function(){return a.info[e]},function(a){a&&Object.keys(a).forEach(function(c){b[c]=a[c]})}),b.$watchCollection(function(){return a.policies[e]},function(a){a&&(b.policies=Object.assign({},a))}),b.$watchCollection(function(){return b.$eval(d.ngMessages)},function(a){a&&(b.errors=Object.assign({},a))})}}}]),a.module("cui-ng").provider("$pagination",[function(){var a,b;this.setPaginationOptions=function(b){a=b},this.getPaginationOptions=function(){return a},this.setUserValue=function(a){b=a},this.getUserValue=function(){return b},this.$get=function(){return this}}]).directive("resultsPerPage",["$compile","$pagination",function(b,c){return{restrict:"E",scope:{selected:"=ngModel"},link:function(d,e,f){var g,h={initScope:function(){g=this,d.options=c.getPaginationOptions(),d.selected=c.getUserValue()||d.options[0],d.$watch("selected",function(a){c.setUserValue(a),d.selected=a})},config:{selectClass:f["class"]||"cui-select"},render:function(){var c=b(String.prototype.concat('<select class="',this.config.selectClass,'" ng-model="selected"','ng-options="option as option for option in options">',"</select>"))(d);a.element(e).replaceWith(c)}};h.initScope(),h.render()}}}]);var c={backspace:8,tab:9,enter:13,escape:27,space:32,up:38,down:40,left:37,right:39,"delete":46,comma:188},d=9007199254740991,e=["text","email","url"];a.module("cui-ng").directive("tagsInput",["$timeout","$document","$window","tagsInputConfig","tiUtil",function(b,f,g,h,i){function j(a,b,c,d){var e,f,g,h={};return e=function(b){return i.safeToString(b[a.displayProperty])},f=function(b,c){b[a.displayProperty]=c},g=function(b){var d=e(b);return d&&d.length>=a.minLength&&d.length<=a.maxLength&&a.allowedTagsPattern.test(d)&&!i.findInObjectArray(h.items,b,a.keyProperty||a.displayProperty)&&c({$tag:b})},h.items=[],h.addText=function(a){var b={};return f(b,a),h.add(b)},h.add=function(c){var d=e(c);return a.replaceSpacesWithDashes&&(d=i.replaceSpacesWithDashes(d)),f(c,d),g(c)?(h.items.push(c),b.trigger("tag-added",{$tag:c})):d&&b.trigger("invalid-tag",{$tag:c}),c},h.remove=function(a){var c=h.items[a];return d({$tag:c})?(h.items.splice(a,1),h.clearSelection(),b.trigger("tag-removed",{$tag:c}),c):void 0},h.select=function(a){0>a?a=h.items.length-1:a>=h.items.length&&(a=0),h.index=a,h.selected=h.items[a]},h.selectPrior=function(){h.select(--h.index)},h.selectNext=function(){h.select(++h.index)},h.removeSelected=function(){return h.remove(h.index)},h.clearSelection=function(){h.selected=null,h.index=-1},h.clearSelection(),h}function k(a){return-1!==e.indexOf(a)}return{restrict:"E",require:"ngModel",scope:{tags:"=ngModel",text:"=?",onTagAdding:"&",onTagAdded:"&",onInvalidTag:"&",onTagRemoving:"&",onTagRemoved:"&",onTagClicked:"&"},replace:!1,transclude:!0,templateUrl:"ngTagsInput/tags-input.html",controller:["$scope","$attrs","$element",function(a,b,c){a.events=i.simplePubSub(),h.load("tagsInput",a,b,{template:[String,"ngTagsInput/tag-item.html"],type:[String,"text",k],placeholder:[String,""],tabindex:[Number,null],removeTagSymbol:[String,String.fromCharCode(215)],replaceSpacesWithDashes:[Boolean,!0],minLength:[Number,3],maxLength:[Number,d],addOnEnter:[Boolean,!0],addOnSpace:[Boolean,!1],addOnComma:[Boolean,!0],addOnBlur:[Boolean,!0],addOnPaste:[Boolean,!1],pasteSplitPattern:[RegExp,/,/],allowedTagsPattern:[RegExp,/.+/],enableEditingLastTag:[Boolean,!1],minTags:[Number,0],maxTags:[Number,d],displayProperty:[String,"text"],keyProperty:[String,""],allowLeftoverText:[Boolean,!1],addFromAutocompleteOnly:[Boolean,!1],spellcheck:[Boolean,!0]}),a.tagList=new j(a.options,a.events,i.handleUndefinedResult(a.onTagAdding,!0),i.handleUndefinedResult(a.onTagRemoving,!0)),this.registerAutocomplete=function(){var b=c.find("input");return{addTag:function(b){return a.tagList.add(b)},focusInput:function(){b[0].focus()},getTags:function(){return a.tagList.items},getCurrentTagText:function(){return a.newTag.text()},getOptions:function(){return a.options},on:function(b,c){return a.events.on(b,c),this}}},this.registerTagItem=function(){return{getOptions:function(){return a.options},removeTag:function(b){a.disabled||a.tagList.remove(b)}}}}],link:function(d,e,h,j){var k,l=[c.enter,c.comma,c.space,c.backspace,c["delete"],c.left,c.right],m=d.tagList,n=d.events,o=d.options,p=e.find("input"),q=["minTags","maxTags","allowLeftoverText"];k=function(){j.$setValidity("maxTags",m.items.length<=o.maxTags),j.$setValidity("minTags",m.items.length>=o.minTags),j.$setValidity("leftoverText",d.hasFocus||o.allowLeftoverText?!0:!d.newTag.text())},j.$isEmpty=function(a){return!a||!a.length},d.newTag={text:function(b){return a.isDefined(b)?(d.text=b,void n.trigger("input-change",b)):d.text||""},invalid:null},d.track=function(a){return a[o.keyProperty||o.displayProperty]},d.$watch("tags",function(a){a?(m.items=i.makeObjectArray(a,o.displayProperty),d.tags=m.items):m.items=[]}),d.$watch("tags.length",function(){k(),j.$validate()}),h.$observe("disabled",function(a){d.disabled=a}),d.eventHandlers={input:{keydown:function(a){n.trigger("input-keydown",a)},focus:function(){d.hasFocus||(d.hasFocus=!0,n.trigger("input-focus"))},blur:function(){b(function(){var a=f.prop("activeElement"),b=a===p[0],c=e[0].contains(a);(b||!c)&&(d.hasFocus=!1,n.trigger("input-blur"))})},paste:function(a){a.getTextData=function(){var b=a.clipboardData||a.originalEvent&&a.originalEvent.clipboardData;return b?b.getData("text/plain"):g.clipboardData.getData("Text")},n.trigger("input-paste",a)}},host:{click:function(){d.disabled||p[0].focus()}},tag:{click:function(a){
n.trigger("tag-clicked",{$tag:a})}}},n.on("tag-added",d.onTagAdded).on("invalid-tag",d.onInvalidTag).on("tag-removed",d.onTagRemoved).on("tag-clicked",d.onTagClicked).on("tag-added",function(){d.newTag.text("")}).on("tag-added tag-removed",function(){d.tags=m.items,j.$setDirty()}).on("invalid-tag",function(){d.newTag.invalid=!0}).on("option-change",function(a){-1!==q.indexOf(a.name)&&k()}).on("input-change",function(){m.clearSelection(),d.newTag.invalid=null}).on("input-focus",function(){e.triggerHandler("focus"),j.$setValidity("leftoverText",!0)}).on("input-blur",function(){o.addOnBlur&&!o.addFromAutocompleteOnly&&m.addText(d.newTag.text()),e.triggerHandler("blur"),k()}).on("input-keydown",function(a){var b,e,f,g,h=a.keyCode,j={};if(!i.isModifierOn(a)&&-1!==l.indexOf(h)){if(j[c.enter]=o.addOnEnter,j[c.comma]=o.addOnComma,j[c.space]=o.addOnSpace,b=!o.addFromAutocompleteOnly&&j[h],e=(h===c.backspace||h===c["delete"])&&m.selected,g=h===c.backspace&&0===d.newTag.text().length&&o.enableEditingLastTag,f=(h===c.backspace||h===c.left||h===c.right)&&0===d.newTag.text().length&&!o.enableEditingLastTag,b)m.addText(d.newTag.text());else if(g){var k;m.selectPrior(),k=m.removeSelected(),k&&d.newTag.text(k[o.displayProperty])}else e?m.removeSelected():f&&(h===c.left||h===c.backspace?m.selectPrior():h===c.right&&m.selectNext());(b||f||e||g)&&a.preventDefault()}}).on("input-paste",function(a){if(o.addOnPaste){var b=a.getTextData(),c=b.split(o.pasteSplitPattern);c.length>1&&(c.forEach(function(a){m.addText(a)}),a.preventDefault())}})}}}]).directive("tiTagItem",["tiUtil",function(a){return{restrict:"E",require:"^tagsInput",template:'<ng-include src="$$template"></ng-include>',scope:{data:"="},link:function(b,c,d,e){var f=e.registerTagItem(),g=f.getOptions();b.$$template=g.template,b.$$removeTagSymbol=g.removeTagSymbol,b.$getDisplayText=function(){return a.safeToString(b.data[g.displayProperty])},b.$removeTag=function(){f.removeTag(b.$index)},b.$watch("$parent.$index",function(a){b.$index=a})}}}]).directive("autoComplete",["$document","$timeout","$sce","$q","tagsInputConfig","tiUtil",function(b,d,e,f,g,h){function i(a,b,c){var d,e,g,i={};return g=function(){return b.tagsInput.keyProperty||b.tagsInput.displayProperty},d=function(a,c){return a.filter(function(a){return!h.findInObjectArray(c,a,g(),function(a,c){return b.tagsInput.replaceSpacesWithDashes&&(a=h.replaceSpacesWithDashes(a),c=h.replaceSpacesWithDashes(c)),h.defaultComparer(a,c)})})},i.reset=function(){e=null,i.items=[],i.visible=!1,i.index=-1,i.selected=null,i.query=null},i.show=function(){b.selectFirstMatch?i.select(0):i.selected=null,i.visible=!0},i.load=h.debounce(function(c,j){i.query=c;var k=f.when(a({$query:c}));e=k,k.then(function(a){k===e&&(a=h.makeObjectArray(a.data||a,g()),a=d(a,j),i.items=a.slice(0,b.maxResultsToShow),i.items.length>0?i.show():i.reset())})},b.debounceDelay),i.selectNext=function(){i.select(++i.index)},i.selectPrior=function(){i.select(--i.index)},i.select=function(a){0>a?a=i.items.length-1:a>=i.items.length&&(a=0),i.index=a,i.selected=i.items[a],c.trigger("suggestion-selected",a)},i.reset(),i}function j(a,b){var c=a.find("li").eq(b),d=c.parent(),e=c.prop("offsetTop"),f=c.prop("offsetHeight"),g=d.prop("clientHeight"),h=d.prop("scrollTop");h>e?d.prop("scrollTop",e):e+f>g+h&&d.prop("scrollTop",e+f-g)}return{restrict:"E",require:"^tagsInput",scope:{source:"&"},templateUrl:"ngTagsInput/auto-complete.html",controller:["$scope","$element","$attrs",function(a,b,c){a.events=h.simplePubSub(),g.load("autoComplete",a,c,{template:[String,"ngTagsInput/auto-complete-match.html"],debounceDelay:[Number,100],minLength:[Number,3],highlightMatchedText:[Boolean,!0],maxResultsToShow:[Number,10],loadOnDownArrow:[Boolean,!1],loadOnEmpty:[Boolean,!1],loadOnFocus:[Boolean,!1],selectFirstMatch:[Boolean,!0],displayProperty:[String,""]}),a.suggestionList=new i(a.source,a.options,a.events),this.registerAutocompleteMatch=function(){return{getOptions:function(){return a.options},getQuery:function(){return a.suggestionList.query}}}}],link:function(b,d,e,f){var g,i=[c.enter,c.tab,c.escape,c.up,c.down],k=b.suggestionList,l=f.registerAutocomplete(),m=b.options,n=b.events;m.tagsInput=l.getOptions(),g=function(a){return a&&a.length>=m.minLength||!a&&m.loadOnEmpty},b.addSuggestionByIndex=function(a){k.select(a),b.addSuggestion()},b.addSuggestion=function(){var b=!1;return k.selected&&(l.addTag(a.copy(k.selected)),k.reset(),l.focusInput(),b=!0),b},b.track=function(a){return a[m.tagsInput.keyProperty||m.tagsInput.displayProperty]},l.on("tag-added tag-removed invalid-tag input-blur",function(){k.reset()}).on("input-change",function(a){g(a)?k.load(a,l.getTags()):k.reset()}).on("input-focus",function(){var a=l.getCurrentTagText();m.loadOnFocus&&g(a)&&k.load(a,l.getTags())}).on("input-keydown",function(a){var d=a.keyCode,e=!1;if(!h.isModifierOn(a)&&-1!==i.indexOf(d))return k.visible?d===c.down?(k.selectNext(),e=!0):d===c.up?(k.selectPrior(),e=!0):d===c.escape?(k.reset(),e=!0):(d===c.enter||d===c.tab)&&(e=b.addSuggestion()):d===c.down&&b.options.loadOnDownArrow&&(k.load(l.getCurrentTagText(),l.getTags()),e=!0),e?(a.preventDefault(),a.stopImmediatePropagation(),!1):void 0}),n.on("suggestion-selected",function(a){j(d,a)})}}}]).directive("tiAutocompleteMatch",["$sce","tiUtil",function(a,b){return{restrict:"E",require:"^autoComplete",template:'<ng-include src="$$template"></ng-include>',scope:{data:"="},link:function(c,d,e,f){var g=f.registerAutocompleteMatch(),h=g.getOptions();c.$$template=h.template,c.$index=c.$parent.$index,c.$highlight=function(c){return h.highlightMatchedText&&(c=b.safeHighlight(c,g.getQuery())),a.trustAsHtml(c)},c.$getDisplayText=function(){return b.safeToString(c.data[h.displayProperty||h.tagsInput.displayProperty])}}}}]).directive("tiTranscludeAppend",function(){return function(a,b,c,d,e){e(function(a){b.append(a)})}}).directive("tiAutosize",["tagsInputConfig",function(b){return{restrict:"A",require:"ngModel",link:function(c,d,e,f){var g,h,i=b.getTextAutosizeThreshold();g=a.element('<span class="cui-tags__registered-tag"></span>'),g.css("display","none").css("visibility","hidden").css("width","auto").css("white-space","pre"),d.parent().append(g),h=function(b){var c,f=b;return a.isString(f)&&0===f.length&&(f=e.placeholder),f&&(g.text(f),g.css("display",""),c=g.prop("offsetWidth"),g.css("display","none")),d.css("width",c?c+i+"px":""),b},f.$parsers.unshift(h),f.$formatters.unshift(h),e.$observe("placeholder",function(a){f.$modelValue||h(a)})}}}]).directive("tiBindAttrs",function(){return function(b,c,d){b.$watch(d.tiBindAttrs,function(b){a.forEach(b,function(a,b){d.$set(b,a)})},!0)}}).provider("tagsInputConfig",function(){var b={},c={},d=3;this.setDefaults=function(a,c){return b[a]=c,this},this.setActiveInterpolation=function(a,b){return c[a]=b,this},this.setTextAutosizeThreshold=function(a){return d=a,this},this.$get=["$interpolate",function(e){var f={};return f[String]=function(a){return a},f[Number]=function(a){return parseInt(a,10)},f[Boolean]=function(a){return"true"===a.toLowerCase()},f[RegExp]=function(a){return new RegExp(a)},{load:function(d,g,h,i){var j=function(){return!0};g.options={},a.forEach(i,function(i,k){var l,m,n,o,p,q;l=i[0],m=i[1],n=i[2]||j,o=f[l],p=function(){var c=b[d]&&b[d][k];return a.isDefined(c)?c:m},q=function(a){g.options[k]=a&&n(a)?o(a):p()},c[d]&&c[d][k]?h.$observe(k,function(a){q(a),g.events.trigger("option-change",{name:k,newValue:a})}):q(h[k]&&e(h[k])(g.$parent))})},getTextAutosizeThreshold:function(){return d}}}]}).factory("tiUtil",["$timeout",function(b){var c={};return c.debounce=function(a,c){var d;return function(){var e=arguments;b.cancel(d),d=b(function(){a.apply(null,e)},c)}},c.makeObjectArray=function(b,c){if(!a.isArray(b)||0===b.length||a.isObject(b[0]))return b;var d=[];return b.forEach(function(a){var b={};b[c]=a,d.push(b)}),d},c.findInObjectArray=function(a,b,d,e){var f=null;return e=e||c.defaultComparer,a.some(function(a){return e(a[d],b[d])?(f=a,!0):void 0}),f},c.defaultComparer=function(a,b){return c.safeToString(a).toLowerCase()===c.safeToString(b).toLowerCase()},c.safeHighlight=function(a,b){function d(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}if(!b)return a;a=c.encodeHTML(a),b=c.encodeHTML(b);var e=new RegExp("&[^;]+;|"+d(b),"gi");return a.replace(e,function(a){return a.toLowerCase()===b.toLowerCase()?"<em>"+a+"</em>":a})},c.safeToString=function(b){return a.isUndefined(b)||null===b?"":b.toString().trim()},c.encodeHTML=function(a){return c.safeToString(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},c.handleUndefinedResult=function(b,c){return function(){var d=b.apply(null,arguments);return a.isUndefined(d)?c:d}},c.replaceSpacesWithDashes=function(a){return c.safeToString(a).replace(/\s/g,"-")},c.isModifierOn=function(a){return a.shiftKey||a.ctrlKey||a.altKey||a.metaKey},c.simplePubSub=function(){var a={};return{on:function(b,c){return b.split(" ").forEach(function(b){a[b]||(a[b]=[]),a[b].push(c)}),this},trigger:function(b,d){var e=a[b]||[];return e.every(function(a){return c.handleUndefinedResult(a,!0)(d)}),this}}},c}]).run(["$templateCache",function(a){a.put("ngTagsInput/tags-input.html",'<div class="cui-tags__host" tabindex="-1" ng-click="eventHandlers.host.click()" ti-transclude-append><div class="cui-tags__container" ng-class="{\'cui-tags__container--focused\': hasFocus}"><ul class="cui-tags__tag-list"><li class="cui-tags__tag" ng-repeat="tag in tagList.items track by track(tag)" ng-class="{\'cui-tags__tag--selected\': tag == tagList.selected }" ng-click="eventHandlers.tag.click(tag)"><ti-tag-item data="::tag"></ti-tag-item></li></ul><input class="cui-tags__input" autocomplete="off" ng-model="newTag.text" ng-model-options="{getterSetter: true}" ng-keydown="eventHandlers.input.keydown($event)" ng-focus="eventHandlers.input.focus($event)" ng-blur="eventHandlers.input.blur($event)" ng-paste="eventHandlers.input.paste($event)" ng-trim="false" ng-class="{\'cui-tags__input--invalid\': newTag.invalid}" ng-disabled="disabled" ti-bind-attrs="{type: options.type, placeholder: options.placeholder, tabindex: options.tabindex, spellcheck: options.spellcheck}" ti-autosize></div></div>'),a.put("ngTagsInput/tag-item.html",'<span ng-bind="$getDisplayText()"></span> <a class="cui-tags__remove" ng-click="$removeTag()" ng-bind="::$$removeTagSymbol"></a>'),a.put("ngTagsInput/auto-complete.html",'<div class="autocomplete" ng-if="suggestionList.visible"><ul class="suggestion-list"><li class="suggestion-item" ng-repeat="item in suggestionList.items track by track(item)" ng-class="{selected: item == suggestionList.selected}" ng-click="addSuggestionByIndex($index)" ng-mouseenter="suggestionList.select($index)"><ti-autocomplete-match data="::item"></ti-autocomplete-match></li></ul></div>'),a.put("ngTagsInput/auto-complete-match.html",'<span ng-bind-html="$highlight($getDisplayText())"></span>')}]),a.module("cui-ng").directive("tether",["$timeout","$parse",function(a,b){return{restrict:"A",scope:!0,link:function(b,c,d){var e;c[0].classList.add("hide--opacity"),a(function(){e=new Tether({element:c,target:d.target,attachment:d.attachment||"top center",targetAttachment:d.targetAttachment||"bottom center",offset:d.offset||"0 0",targetOffset:d.targetOffset||"0 0",targetModifier:d.targetModifier||void 0,constraints:b.$eval(d.constraints)||void 0})}).then(function(){e.position(),c[0].classList.remove("hide--opacity")})}}}]),a.module("cui-ng").directive("uiSrefActiveNested",["$state",function(a){return{restrict:"A",link:function(a,b,c){var d=void 0;if(!c.uiSref)throw"ui-sref-active-nested can only be used on elements with a ui-sref attribute";d=c.uiSref.indexOf(".")>-1?c.uiSref.split(".")[0]:c.uiSref,a.$on("$stateChangeStart",e);var e=function(a,e){e.name.indexOf(".")>-1&&e.name.split(".")[0]===d?b[0].classList.add(c.uiSrefActiveNested):-1===e.name.indexOf(".")&&e.name===d?b[0].classList.add(c.uiSrefActiveNested):b[0].classList.remove(c.uiSrefActiveNested)}}}}]),a.module("cui.authorization",[]).factory("cui.authorization.routing",["cui.authorization.authorize","$timeout",function(a,b){var c=function(c,d,e,f,g,h,i){var j;void 0!==e.access?(j=a.authorize(e.access.loginRequired,e.access.requiredEntitlements,e.access.entitlementType,i),"login required"===j?b(function(){d.go("login",f).then(function(){c.$broadcast("$stateChangeSuccess",e,f,g,h)})}):"not authorized"===j?b(function(){d.go("notAuthorized",f).then(function(){c.$broadcast("$stateChangeSuccess",e,f,g,h)})}):"authorized"===j&&b(function(){d.go(e.name,f,{notify:!1}).then(function(){c.$broadcast("$stateChangeSuccess",e,f,g,h)})})):d.go(e.name,f,{notify:!1}).then(function(){c.$broadcast("$stateChangeSuccess",e,f,g,h)})};return c}]).factory("cui.authorization.authorize",[function(){var b=function(b,c,d,e){var f,g,h=[],i=!0,j="not authorized";if(d=d||"atLeastOne",b===!0&&0===e.length)j="login required";else if(b!==!0||void 0===e||void 0!==c&&0!==c.length){if(c){for(a.forEach(e,function(a){h.push(a.toLowerCase())}),g=0;g<c.length;g++)if(f=c[g].toLowerCase(),"all"===d){if(i=i&&h.indexOf(f)>-1,i===!1)break}else if("atLeastOne"===d&&(i=h.indexOf(f)>-1))break;j=i?"authorized":"not authorized"}}else j="authorized";return j};return{authorize:b}}]).directive("cuiAccess",["cui.authorization.authorize",function(b){return{restrict:"A",scope:{userEntitlements:"=",cuiAccess:"="},link:function(c,d,e){c.loginRequired=!0,c.requiredEntitlements=c.cuiAccess.requiredEntitlements||[],c.entitlementType=c.cuiAccess.entitlementType||"atLeastOne",d=a.element(d),c.$watch("userEntitlements",function(){var a=b.authorize(c.loginRequired,c.requiredEntitlements,c.entitlementType,c.userEntitlements);"authorized"!==a?d.addClass("hide"):d.removeClass("hide")})}}}])}(angular);
//# sourceMappingURL=cui-ng.min.js.map